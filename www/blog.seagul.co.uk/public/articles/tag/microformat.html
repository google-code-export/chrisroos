<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>

  <head>
    <meta name="microid" content="ff511e16d7108be450fccd6f4611cf8d1d5416d1" >
    <meta http-equiv="content-type" content="text/html; charset=utf-8" >
    <link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/DeferredUntilInspirationHits" >
    <link rel="stylesheet" href="/stylesheets/yui-reset-fonts-grids.css" type="text/css" media="all">
    <link rel="stylesheet" href="/stylesheets/blog.css" type="text/css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="/stylesheets/syntax.css" type="text/css" media="screen" charset="utf-8">
    <link rel="openid.server" href="http://www.myopenid.com/server">
    <link rel="openid.delegate" href="http://chrisroos.myopenid.com/">
    <title>Posts tagged microformat - deferred until inspiration hits</title>
  </head>
  
  <body>
    
    <div id="doc3" class="yui-t4">
      <div id="hd">
        <h1><a class="blogTitle" href="/">deferred until inspiration hits</a></h1>
      </div>
      <div id="bd">
        <div id="yui-main">
          <div class="yui-b">
            <div class="yui-g">

              
                <h2>
                  <a href="/articles/2007/10/19/a-common-pattern-in-retailers-receipt-pages-and-a-microformat-solution">A common pattern in retailers' receipt pages (and a microformat solution)</a>
                </h2>
                <p class="postedOn">
                  Posted by Chris Roos
                  <span class="typo_date" title="Fri, 19 Oct 2007 07:58:00">
                    Fri, 19 Oct 2007 07:58:00
                  </span>
                </p>

                <p>We&#8217;ve been looking at embedding a little bit of javascript in one of our partner&#8217;s receipt pages to send us the details of which products were purchased (using <a href="http://en.wikipedia.org/wiki/Stock_Keeping_Unit">SKUs</a>).  A quick glance over the page revealed that nine other providers (<a href="http://www.google.com/analytics/">GA</a>, an <a href="http://en.wikipedia.org/wiki/Search_engine_optimization"><span class="caps">SEO</span></a> helper and a bunch of price comparators) had the same idea.  That&#8217;s the same data repeated nine times.  Ten if you include the human readable copy.  Now that seems like a problem waiting to be solved to me.  It also feels like a perfect fit for <a href="http://microformats.org/">microformats</a>.  If we had a <a href="http://microformats.org/wiki/receipt">receipt microformat</a> then we could use javascript to parse the data rather than having to re-define it each time.  We would also be removing all duplication and creating semantically rich content (I guess that&#8217;s basically what microformats do anyway) in the process.</p>


	<p>So, something that might currently look like this:</p>


<div class="typocode"><pre><code class="typocode_html">&lt;table&gt;
  &lt;tr&gt;
    &lt;th&gt;Order Number&lt;/th&gt;
    &lt;th&gt;Price&lt;/th&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;1&lt;/td&gt;
    &lt;td&gt;£19.99&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;script type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;
  var order_id = 1
  var price = 1999
&lt;/script&gt;
&lt;script src=&quot;http://MY-PRICE-COMPARATOR&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;

&lt;script type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;
  var orderNumber = 1
  var price = 19.99
&lt;/script&gt;
&lt;script src=&quot;http://MY-SEO-HELPER&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;

&lt;!-- And repeat... --&gt;</code></pre></div>

	<p>Could become much simpler:</p>


<div class="typocode"><pre><code class="typocode_html">&lt;table&gt;
  &lt;tr&gt;
    &lt;th&gt;Order Number&lt;/th&gt;
    &lt;th&gt;Price&lt;/th&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class=&quot;orderNumber&quot;&gt;1&lt;/td&gt;
    &lt;td class=&quot;orderPrice&quot;&gt;&lt;span class=&quot;orderCurrency&quot;&gt;£&lt;/span&gt;19.99&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;script src=&quot;http://MY-PRICE-COMPARATOR&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;http://MY-SEO-HELPER&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</code></pre></div>

	<p>There has been discussion of such a <a href="http://microformats.org/wiki/receipt">receipt microformat</a> but a quick search seemed to suggest that it hasn&#8217;t been discussed in the context of this specific problem.  Maybe I&#8217;ll go add my voice to that discussion&#8230;</p>

                
                  <p>
                    Tags 
                    
                      <a href="/articles/tag/commerce" rel="tag">commerce</a>, 
                    
                      <a href="/articles/tag/javascript" rel="tag">javascript</a>, 
                    
                      <a href="/articles/tag/microformat" rel="tag">microformat</a>, 
                    
                      <a href="/articles/tag/receipt" rel="tag">receipt</a>, 
                    
                      <a href="/articles/tag/retail" rel="tag">retail</a>, 
                    
                  </p>
                
              
                <h2>
                  <a href="/articles/2007/10/03/a-microformat-for-my-contact-details-instant-messaging-twitter-et-al">A microformat for my contact details (instant messaging, twitter et al)</a>
                </h2>
                <p class="postedOn">
                  Posted by Chris Roos
                  <span class="typo_date" title="Wed, 03 Oct 2007 23:52:00">
                    Wed, 03 Oct 2007 23:52:00
                  </span>
                </p>

                <p>I haven&#8217;t done any research on this so it may have already been proposed over at the <a href="http://microformats.org/">microformats</a> site.</p>


	<h3>The problem</h3>


	<p>Sometimes I want to communicate with the author of a webpage.  I don&#8217;t want to have to hunt around to find contact details and I probably don&#8217;t want to fill in a form.</p>


	<h3>A proposal to fix part of the problem</h3>


	<p>If the author&#8217;s contact details were semantically marked up, either on the page I was looking at or linked to elsewhere on the web, then I could use a simple parser to extract those details and select the best communication tool to use manually.</p>


	<p>Maybe some code can help explain what I mean.</p>


	<h4>A semantically marked up contact page.</h4>


<div class="typocode"><pre><code class="typocode_html">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot;&gt;

&lt;html&gt;

  &lt;head&gt;
    &lt;title&gt;Contact Details&lt;/title&gt;
  &lt;/head&gt;

  &lt;body&gt;
    &lt;dl class=&quot;contactDetails&quot;&gt;
      &lt;dt&gt;Skype&lt;/dt&gt;
      &lt;dd class=&quot;skype identifier&quot;&gt;skype-username&lt;/dd&gt;
      &lt;dt&gt;MSN&lt;/dt&gt;
      &lt;dd class=&quot;msn identifier&quot;&gt;msn-username&lt;/dd&gt;
    &lt;/dl&gt;
  &lt;/body&gt;

&lt;/html&gt;</code></pre></div>

	<h4>A parser in <a href="http://www.ruby-lang.org/">ruby</a></h4>


<div class="typocode"><pre><code class="typocode_ruby"><span class="ident">require</span> <span class="punct">'</span><span class="string">rubygems</span><span class="punct">'</span>
<span class="ident">require</span> <span class="punct">'</span><span class="string">hpricot</span><span class="punct">'</span>

<span class="keyword">class </span><span class="class">ContactParser</span>
  <span class="keyword">def </span><span class="method">self.from_html</span><span class="punct">(</span><span class="ident">html</span><span class="punct">)</span>
    <span class="ident">doc</span> <span class="punct">=</span> <span class="constant">Hpricot</span><span class="punct">(</span><span class="ident">html</span><span class="punct">)</span>
    <span class="ident">new</span><span class="punct">(</span><span class="ident">doc</span><span class="punct">)</span>
  <span class="keyword">end</span>
  <span class="keyword">def </span><span class="method">initialize</span><span class="punct">(</span><span class="ident">hpricot_doc</span><span class="punct">)</span>
    <span class="attribute">@hpricot_doc</span> <span class="punct">=</span> <span class="ident">hpricot_doc</span>
  <span class="keyword">end</span>
  <span class="keyword">def </span><span class="method">service_identifiers</span>
    <span class="punct">(</span><span class="attribute">@hpricot_doc</span><span class="punct">/'</span><span class="string">.contactDetails .identifier</span><span class="punct">').</span><span class="ident">inject</span><span class="punct">({})</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">hash</span><span class="punct">,</span> <span class="ident">e</span><span class="punct">|</span>
       <span class="ident">service</span> <span class="punct">=</span> <span class="punct">(</span><span class="ident">e</span><span class="punct">.</span><span class="ident">classes</span> <span class="punct">-</span> <span class="punct">['</span><span class="string">identifier</span><span class="punct">']).</span><span class="ident">first</span>
       <span class="ident">identifier</span> <span class="punct">=</span> <span class="ident">e</span><span class="punct">.</span><span class="ident">inner_text</span>
       <span class="ident">hash</span><span class="punct">[</span><span class="ident">service</span><span class="punct">]</span> <span class="punct">=</span> <span class="ident">identifier</span>
       <span class="ident">hash</span>
    <span class="keyword">end</span>
  <span class="keyword">end</span>
  <span class="keyword">def </span><span class="method">identifier</span><span class="punct">(</span><span class="ident">service</span><span class="punct">)</span>
    <span class="punct">(</span><span class="attribute">@hpricot_doc</span><span class="punct">/&quot;</span><span class="string">.contactDetails .<span class="expr">#{service}</span>.identifier</span><span class="punct">&quot;).</span><span class="ident">inner_text</span>
  <span class="keyword">end</span>
<span class="keyword">end</span>

<span class="ident">contact_details_file</span> <span class="punct">=</span> <span class="constant">File</span><span class="punct">.</span><span class="ident">dirname</span><span class="punct">(</span><span class="constant">__FILE__</span><span class="punct">)</span> <span class="punct">+</span> <span class="punct">'</span><span class="string">/contact-details.html</span><span class="punct">'</span>
<span class="ident">html</span> <span class="punct">=</span> <span class="constant">File</span><span class="punct">.</span><span class="ident">open</span><span class="punct">(</span><span class="ident">contact_details_file</span><span class="punct">)</span> <span class="punct">{</span> <span class="punct">|</span><span class="ident">f</span><span class="punct">|</span> <span class="ident">f</span><span class="punct">.</span><span class="ident">read</span> <span class="punct">}</span>
<span class="ident">parser</span> <span class="punct">=</span> <span class="constant">ContactParser</span><span class="punct">.</span><span class="ident">from_html</span><span class="punct">(</span><span class="ident">html</span><span class="punct">)</span>

<span class="ident">p</span> <span class="ident">parser</span><span class="punct">.</span><span class="ident">service_identifiers</span>
<span class="comment"># =&gt; {&quot;skype&quot;=&gt;&quot;skype-username&quot;, &quot;msn&quot;=&gt;&quot;msn-username&quot;}</span>
<span class="ident">p</span> <span class="ident">parser</span><span class="punct">.</span><span class="ident">identifier</span><span class="punct">('</span><span class="string">skype</span><span class="punct">')</span>
<span class="comment"># =&gt; 'skype-username'</span>
<span class="ident">p</span> <span class="ident">parser</span><span class="punct">.</span><span class="ident">identifier</span><span class="punct">('</span><span class="string">blurgh</span><span class="punct">')</span>
<span class="comment"># =&gt; ''</span></code></pre></div>

	<h3>Further considerations</h3>


	<ul>
	<li>If existing communication tools<sup><a href="#fn1">1</a></sup> were to integrate this parser then it would be easy to add a contact by giving the url of, for example, their blog.</li>
		<li>Author&#8217;s should be able to specify the order of the tools that they wish to use for communication.  We could just assume that the list of contact details is in the author&#8217;s preferred order.</li>
		<li>This would be open to spam.  Err, not too sure what to do about this.</li>
		<li>Ultimately, I&#8217;d like to hit a &#8216;communicate&#8217; button in <a href="http://www.mozilla.com/en-US/firefox/">firefox</a> that automatically decides which communication protocols we have in common and allows me to get my message through.</li>
	</ul>


	<p>Anyone have any thoughts?</p>


	<p>Code is all over on <a href="http://chrisroos.googlecode.com/svn/trunk/contact-microformat/">google code</a>.</p>


	<p id="fn1"><sup>1</sup> I&#8217;m thinking of multi protocol tools, like <a href="http://www.adiumx.com/">adium</a>, in particular.</p>

                
                  <p>
                    Tags 
                    
                      <a href="/articles/tag/aim" rel="tag">aim</a>, 
                    
                      <a href="/articles/tag/contact" rel="tag">contact</a>, 
                    
                      <a href="/articles/tag/email" rel="tag">email</a>, 
                    
                      <a href="/articles/tag/im" rel="tag">im</a>, 
                    
                      <a href="/articles/tag/messaging" rel="tag">messaging</a>, 
                    
                      <a href="/articles/tag/microformat" rel="tag">microformat</a>, 
                    
                      <a href="/articles/tag/msn" rel="tag">msn</a>, 
                    
                      <a href="/articles/tag/ruby" rel="tag">ruby</a>, 
                    
                      <a href="/articles/tag/skype" rel="tag">skype</a>, 
                    
                      <a href="/articles/tag/twitter" rel="tag">twitter</a>, 
                    
                      <a href="/articles/tag/yim" rel="tag">yim</a>, 
                    
                  </p>
                
              

            </div>
          </div>
        </div>
        <div class="yui-b">
          <img src="/images/me.jpg" width="170px" height="111px" alt="Me">
          <ul class="navigation">
            <li>
              <a href="/contents">contents</a>
            </li>
            <li>
              <a href="http://flickr.com/photos/chrisjroos">flickr</a>
            </li>
            <li>
              <a href="http://del.icio.us/chrisjroos">del.icio.us</a>
            </li>
          </ul>
          <div id="twitter_div">
            <h3><a href="http://twitter.com/chrisroos">twitter</a></h3>
            <ul id="twitter_update_list"></ul>
          </div>
        </div>
      </div>
    </div>
    <div id="ft">
      <!-- Footer -->
    </div>
    
    <script type="text/javascript" src="http://twitter.com/javascripts/blogger.js"></script>
    <script type="text/javascript" src="http://twitter.com/statuses/user_timeline/chrisroos.json?callback=twitterCallback2&amp;count=5"></script>
  
    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-160238-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>
  </body>

</html>