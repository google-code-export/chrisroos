<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>

  <head>
    <meta name="microid" content="ff511e16d7108be450fccd6f4611cf8d1d5416d1" >
    <meta http-equiv="content-type" content="text/html; charset=utf-8" >
    <link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/DeferredUntilInspirationHits" >
    <link rel="stylesheet" href="/stylesheets/yui-reset-fonts-grids.css" type="text/css" media="all">
    <link rel="stylesheet" href="/stylesheets/blog.css" type="text/css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="/stylesheets/syntax.css" type="text/css" media="screen" charset="utf-8">
    <link rel="openid.server" href="http://www.myopenid.com/server">
    <link rel="openid.delegate" href="http://chrisroos.myopenid.com/">
    <title>Posts tagged banking - deferred until inspiration hits</title>
  </head>
  
  <body>
    
    <div id="doc3" class="yui-t4">
      <div id="hd">
        <h1><a class="blogTitle" href="/">deferred until inspiration hits</a></h1>
      </div>
      <div id="bd">
        <div id="yui-main">
          <div class="yui-b">
            <div class="yui-g">

              
                <h2>
                  <a href="/articles/2007/10/15/more-hsbc-shenanigans">More Hsbc Shenanigans</a>
                </h2>
                <p class="postedOn">
                  Posted by Chris Roos
                  <span class="typo_date" title="Mon, 15 Oct 2007 20:13:00">
                    Mon, 15 Oct 2007 20:13:00
                  </span>
                </p>

                <p>This will be of interest to very few (if any) people &#8211; I&#8217;d suggest you just move on to something more interesting.</p>


	<p>Yesterday, I contacted Hsbc using the Internet Banking feedback form that was outside of the Internet Banking site itself.</p>


<blockquote>
I believe that the Ofx export of transactions has been broken since your internet banking &#8216;upgrade&#8217;.  I&#8217;ve tried many times to contact you using My Messages and also over the phone &#8211; the people I seem to be dealing with are unable or unwilling to help.

	<p>It&#8217;s a very minor problem &#8211; my account is overdrawn yet the balance is shown as positive in the Ofx export.</p>


	<p>I&#8217;ve posted about the issue on my blog<sup><a href="#fn1">1</a></sup>, in the hope that someone might provide me some contact details of someone that can actually help.  Unfortunately that didn&#8217;t get my anywhere.</p>


	<p>I look forward to hearing from you.</p>


	<p>Cheers,</p>


	<p>Chris</p>


[1] http://blog.seagul.co.uk/articles/2007/10/05/trying-to-speak-to-someone-in-development-at-hsbc-can-anyone-help
</blockquote>

	<p>I was hoping to get through to a human.  Unfortunately I just got the same copy and paste bot that I get from within the Internet banking site.</p>


<blockquote>
Dear Mr Roos

	<p>Our Reference: 508-5629320-15102007-RR</p>


	<p>Thank you for using the feedback facility for our Internet Banking service.</p>


	<p>This is with regard to your recent e-mail concerning problems related to the download of transactions. From our experience to date, we have found that similar queries have been most effectively dealt with over the telephone rather than an exchange of a series of e-mails.</p>


	<p>On occasions it can be of benefit to be online whilst talking to us. You may wish to call from a separate line to your Internet connection.</p>


	<p>If you require further assistance, please call us on 0845 600 2290 (within UK) or +44 1226261226 (outside UK).  Minicom support is available on 0845 7125563.  The Internet Banking Helpdesk is open from Monday to Sunday 8.00am to 10.00pm (UK times).</p>


	<p>Kind Regards</p>


Rajan
Technical Support Representative
<span class="caps">HSBC</span> Internet Banking Technical Support
</blockquote>

	<p>Tonight, I&#8217;ve emailed their complaints email address.</p>


<blockquote>
Hi,

	<p>I&#8217;ll apologise in advance for potentially mis-using your complaints email address.</p>


	<p>I&#8217;ve got a problem with downloading my transactions in Ofx format from the Internet banking site.  I&#8217;ve written up my experience so far<sup><a href="#fn1">1</a></sup>.  As a web developer with experience of the Ofx format I&#8217;m fairly sure that you&#8217;ve got a bug in your Internet banking site.  I&#8217;ve been trying for over a month to speak to someone in your support department to no avail.</p>


	<p>All I want is for you (or someone that is able to do more than hit copy, paste, send) to read the post below and pass this information on to your development team &#8211; they will be able to help.</p>


	<p>Be assured that I&#8217;m really just trying to help you guys.  If you need anything else from me then just give me a shout.</p>


	<p>Cheers,</p>


	<p>Chris</p>


[1] http://blog.seagul.co.uk/articles/2007/10/05/trying-to-speak-to-someone-in-development-at-hsbc-can-anyone-help
</blockquote>

	<p>I&#8217;m getting slightly concerned that I might be wrong now &#8211; then I&#8217;d look real stoopid.  As it is I just look a bit sad.</p>

                
                  <p>
                    Tags 
                    
                      <a href="/articles/tag/banking" rel="tag">banking</a>, 
                    
                      <a href="/articles/tag/hsbc" rel="tag">hsbc</a>, 
                    
                      <a href="/articles/tag/internet" rel="tag">internet</a>, 
                    
                      <a href="/articles/tag/ofx" rel="tag">ofx</a>, 
                    
                  </p>
                
              
                <h2>
                  <a href="/articles/2007/10/05/trying-to-speak-to-someone-in-development-at-hsbc-can-anyone-help">Trying to speak to someone in development at Hsbc - can anyone help?</a>
                </h2>
                <p class="postedOn">
                  Posted by Chris Roos
                  <span class="typo_date" title="Fri, 05 Oct 2007 08:43:00">
                    Fri, 05 Oct 2007 08:43:00
                  </span>
                </p>

                <p>I&#8217;m almost 100% certain that there&#8217;s a <a href="http://twitter.com/chrisroos/statuses/247143372">bug</a> in the Hsbc Internet Banking site.</p>


	<p>My account is overdrawn yet the balance shows as positive when I download my transactions in either &#8216;Money 98 onwards (ofx)&#8217; or &#8216;Quicken 2002 (ofx)&#8217;.  I believe that section 3.2.9.2 of the <a href="http://www.ofx.net">Ofx</a> 2.1.1 spec explains that these balances should be shown as negative.</p>


	<p>I&#8217;ve tried to <a href="http://www.flickr.com/search/?w=31365693@N00&#38;q=hsbc+AND+ofx&#38;m=tags">email</a> and I&#8217;ve <a href="http://twitter.com/chrisroos/statuses/279942352">tried</a> <a href="http://twitter.com/chrisroos/statuses/279956472">to</a> <a href="http://twitter.com/chrisroos/statuses/313632312">call</a> <a href="http://twitter.com/chrisroos/statuses/313656682">hsbc</a>.  Both to no avail.</p>


	<p>Does anyone know anyone that works at Hsbc and might be able to get a message to someone in development?  If not, what&#8217;s the etiquette on facebook groups?  I notice that there a few hsbc groups &#8211; can I just post messages to them asking for help?</p>


	<p>I&#8217;ve gotten so used to dealing with <a href="http://www.wesabe.com">real</a> companies that I&#8217;d forgotten how the old world works.</p>

                
                  <p>
                    Tags 
                    
                      <a href="/articles/tag/banking" rel="tag">banking</a>, 
                    
                      <a href="/articles/tag/bug" rel="tag">bug</a>, 
                    
                      <a href="/articles/tag/crap" rel="tag">crap</a>, 
                    
                      <a href="/articles/tag/development" rel="tag">development</a>, 
                    
                      <a href="/articles/tag/hsbc" rel="tag">hsbc</a>, 
                    
                      <a href="/articles/tag/internet" rel="tag">internet</a>, 
                    
                      <a href="/articles/tag/ofx" rel="tag">ofx</a>, 
                    
                      <a href="/articles/tag/wesabe" rel="tag">wesabe</a>, 
                    
                  </p>
                
              
                <h2>
                  <a href="/articles/2007/05/14/automatically-downloading-my-recent-transactions-from-lloyds-tsb">Automatically downloading my recent transactions from Lloyds Tsb</a>
                </h2>
                <p class="postedOn">
                  Posted by Chris Roos
                  <span class="typo_date" title="Mon, 14 May 2007 22:39:00">
                    Mon, 14 May 2007 22:39:00
                  </span>
                </p>

                <p>In my continuing quest to cut down my use of banking websites (and increase my use of <a href="http://www.wesabe.com">wesabe</a>), I&#8217;ve hacked together a script to download my recent transactions from <a href="http://www.lloydstsb.com">Lloyds Tsb</a>.  Sadly, the transactions are in <a href="http://en.wikipedia.org/wiki/QIF"><span class="caps">QIF</span></a> format, as only <span class="caps">QIF</span> and <a href="http://en.wikipedia.org/wiki/Comma-separated_values"><span class="caps">CSV</span></a> formats are offered.  Maybe I&#8217;ll get round to exporting the data in <a href="http://www.ofx.net"><span class="caps">OFX</span></a> format sometime in the future.</p>


	<p>Code is hosted on <a href="http://chrisroos.googlecode.com/svn/trunk/lloydstsb/">google code</a>, and pasted in all its syntax-highlighted glory below.</p>


<div class="typocode"><pre><code class="typocode_ruby"><span class="ident">require</span> <span class="punct">'</span><span class="string">lloydstsb_credentials</span><span class="punct">'</span>

<span class="ident">require</span> <span class="punct">'</span><span class="string">rubygems</span><span class="punct">'</span>
<span class="ident">require</span> <span class="punct">'</span><span class="string">hpricot</span><span class="punct">'</span>

<span class="keyword">def </span><span class="method">execute_curl</span><span class="punct">(</span><span class="ident">cmd</span><span class="punct">)</span>
  `<span class="comment">#{cmd}`</span>
<span class="keyword">end</span>

<span class="constant">COOKIE_LOCATION</span> <span class="punct">=</span> <span class="punct">'</span><span class="string">/Users/chrisroos/lloydstsb_cookie</span><span class="punct">'</span>
<span class="constant">DOWNLOADED_STATEMENT_LOCATION</span> <span class="punct">=</span> <span class="punct">'</span><span class="string">/Users/chrisroos/Desktop/lloyds.qif</span><span class="punct">'</span>

<span class="comment"># Store some cookies for later</span>
<span class="ident">curl_cmd</span> <span class="punct">=</span> <span class="punct">%[</span><span class="string">curl -s -c&quot;<span class="expr">#{COOKIE_LOCATION}</span>&quot; &quot;https://online.lloydstsb.co.uk/customer.ibc&quot;</span><span class="punct">]</span>
<span class="ident">html</span> <span class="punct">=</span> <span class="ident">execute_curl</span><span class="punct">(</span><span class="ident">curl_cmd</span><span class="punct">)</span>

<span class="comment"># Obtain the key that we need to POST along with our Username and Password</span>
<span class="ident">doc</span> <span class="punct">=</span> <span class="constant">Hpricot</span><span class="punct">(</span><span class="ident">html</span><span class="punct">)</span>
<span class="ident">key</span> <span class="punct">=</span> <span class="punct">(</span><span class="ident">doc</span><span class="punct">/'</span><span class="string">input[@name=Key]</span><span class="punct">').</span><span class="ident">first</span><span class="punct">.</span><span class="ident">attributes</span><span class="punct">['</span><span class="string">value</span><span class="punct">']</span>

<span class="comment"># POST the key, userid and password</span>
<span class="ident">curl_cmd</span> <span class="punct">=</span> <span class="punct">%[</span><span class="string">curl -s -b&quot;<span class="expr">#{COOKIE_LOCATION}</span>&quot; &quot;https://online.lloydstsb.co.uk/logon.ibc&quot; -d&quot;Java=Off&quot; -d&quot;Key=<span class="expr">#{key}</span>&quot; -d&quot;UserId1=<span class="expr">#{USERID}</span>&quot; -d&quot;Password=<span class="expr">#{PASSWORD}</span>&quot;</span><span class="punct">]</span>
<span class="ident">html</span> <span class="punct">=</span> <span class="ident">execute_curl</span><span class="punct">(</span><span class="ident">curl_cmd</span><span class="punct">)</span>

<span class="comment"># Obtain the three characters from our memorable info that we need to POST</span>
<span class="ident">doc</span> <span class="punct">=</span> <span class="constant">Hpricot</span><span class="punct">(</span><span class="ident">html</span><span class="punct">)</span>
<span class="ident">position_of_char1</span> <span class="punct">=</span> <span class="constant">Integer</span><span class="punct">((</span><span class="ident">doc</span><span class="punct">/'</span><span class="string">input[@name=ResponseKey0]</span><span class="punct">').</span><span class="ident">first</span><span class="punct">.</span><span class="ident">attributes</span><span class="punct">['</span><span class="string">value</span><span class="punct">'])</span>
<span class="ident">position_of_char2</span> <span class="punct">=</span> <span class="constant">Integer</span><span class="punct">((</span><span class="ident">doc</span><span class="punct">/'</span><span class="string">input[@name=ResponseKey1]</span><span class="punct">').</span><span class="ident">first</span><span class="punct">.</span><span class="ident">attributes</span><span class="punct">['</span><span class="string">value</span><span class="punct">'])</span>
<span class="ident">position_of_char3</span> <span class="punct">=</span> <span class="constant">Integer</span><span class="punct">((</span><span class="ident">doc</span><span class="punct">/'</span><span class="string">input[@name=ResponseKey2]</span><span class="punct">').</span><span class="ident">first</span><span class="punct">.</span><span class="ident">attributes</span><span class="punct">['</span><span class="string">value</span><span class="punct">'])</span>
<span class="ident">char1</span> <span class="punct">=</span> <span class="constant">MEMORABLE</span><span class="punct">.</span><span class="ident">split</span><span class="punct">('</span><span class="string"></span><span class="punct">')[</span><span class="ident">position_of_char1</span> <span class="punct">-</span> <span class="number">1</span><span class="punct">]</span>
<span class="ident">char2</span> <span class="punct">=</span> <span class="constant">MEMORABLE</span><span class="punct">.</span><span class="ident">split</span><span class="punct">('</span><span class="string"></span><span class="punct">')[</span><span class="ident">position_of_char2</span> <span class="punct">-</span> <span class="number">1</span><span class="punct">]</span>
<span class="ident">char3</span> <span class="punct">=</span> <span class="constant">MEMORABLE</span><span class="punct">.</span><span class="ident">split</span><span class="punct">('</span><span class="string"></span><span class="punct">')[</span><span class="ident">position_of_char3</span> <span class="punct">-</span> <span class="number">1</span><span class="punct">]</span>

<span class="comment"># POST our memorable info</span>
<span class="ident">curl_cmd</span> <span class="punct">=</span> <span class="punct">%[</span><span class="string">curl -s -L -b&quot;<span class="expr">#{COOKIE_LOCATION}</span>&quot; &quot;https://online.lloydstsb.co.uk/miheld.ibc&quot; -d&quot;ResponseKey0=<span class="expr">#{position_of_char1}</span>&quot; -d&quot;ResponseValue0=<span class="expr">#{char1}</span>&quot; -d&quot;ResponseKey1=<span class="expr">#{position_of_char2}</span>&quot; -d&quot;ResponseValue1=<span class="expr">#{char2}</span>&quot; -d&quot;ResponseKey2=<span class="expr">#{position_of_char3}</span>&quot; -d&quot;ResponseValue2=<span class="expr">#{char3}</span>&quot;</span><span class="punct">]</span>
<span class="ident">execute_curl</span> <span class="ident">curl_cmd</span>

<span class="comment"># SELECT OUR ACCOUNT</span>
<span class="ident">curl_cmd</span> <span class="punct">=</span> <span class="punct">%[</span><span class="string">curl -s -b&quot;<span class="expr">#{COOKIE_LOCATION}</span>&quot; &quot;https://online.lloydstsb.co.uk/account.ibc?Account=<span class="expr">#{SORT_CODE_AND_ACCOUNT_NUMBER}</span>&quot;</span><span class="punct">]</span>
<span class="ident">execute_curl</span> <span class="ident">curl_cmd</span>

<span class="comment"># GET OUR MOST RECENT TRANSACTIONS</span>
<span class="ident">curl_cmd</span> <span class="punct">=</span> <span class="punct">%[</span><span class="string">curl -s -b&quot;<span class="expr">#{COOKIE_LOCATION}</span>&quot; &quot;https://online.lloydstsb.co.uk/statement.ibc?Account=<span class="expr">#{SORT_CODE_AND_ACCOUNT_NUMBER}</span>&amp;PageRequired=MostRecent&quot;</span><span class="punct">]</span>
<span class="ident">execute_curl</span> <span class="ident">curl_cmd</span>

<span class="comment"># GET THE DOWNLOAD STATEMENT FORM</span>
<span class="ident">curl_cmd</span> <span class="punct">=</span> <span class="punct">%[</span><span class="string">curl -s -b&quot;<span class="expr">#{COOKIE_LOCATION}</span>&quot; &quot;https://online.lloydstsb.co.uk/statement.ibc?Account=<span class="expr">#{SORT_CODE_AND_ACCOUNT_NUMBER}</span>&amp;selectbox=6&quot;</span><span class="punct">]</span>
<span class="ident">execute_curl</span> <span class="ident">curl_cmd</span>

<span class="comment"># DOWNLOAD THE MOST RECENT TRANSACTIONS IN QIF FORMAT</span>
<span class="ident">curl_cmd</span> <span class="punct">=</span> <span class="punct">%[</span><span class="string">curl -s -L -b&quot;<span class="expr">#{COOKIE_LOCATION}</span>&quot; &quot;https://online.lloydstsb.co.uk/statementdownload.ibc?Account=<span class="expr">#{SORT_CODE_AND_ACCOUNT_NUMBER}</span>&amp;Download=DownloadLatest&amp;Format=104&quot; -o&quot;<span class="expr">#{DOWNLOADED_STATEMENT_LOCATION}</span>&quot;</span><span class="punct">]</span>
<span class="ident">execute_curl</span> <span class="ident">curl_cmd</span>

<span class="comment"># Remove the cookie</span>
`<span class="ident">rm</span> <span class="comment">#{COOKIE_LOCATION}`</span></code></pre></div>

                
                  <p>
                    Tags 
                    
                      <a href="/articles/tag/banking" rel="tag">banking</a>, 
                    
                      <a href="/articles/tag/lloyds" rel="tag">lloyds</a>, 
                    
                      <a href="/articles/tag/lloyds-tsb" rel="tag">lloyds-tsb</a>, 
                    
                      <a href="/articles/tag/qif" rel="tag">qif</a>, 
                    
                      <a href="/articles/tag/tsb" rel="tag">tsb</a>, 
                    
                      <a href="/articles/tag/wesabe" rel="tag">wesabe</a>, 
                    
                  </p>
                
              

            </div>
          </div>
        </div>
        <div class="yui-b">
          <img src="/images/me.jpg" width="170px" height="111px" alt="Me">
          <ul class="navigation">
            <li>
              <a href="/contents">contents</a>
            </li>
            <li>
              <a href="http://flickr.com/photos/chrisjroos">flickr</a>
            </li>
            <li>
              <a href="http://del.icio.us/chrisjroos">del.icio.us</a>
            </li>
          </ul>
          <div id="twitter_div">
            <h3><a href="http://twitter.com/chrisroos">twitter</a></h3>
            <ul id="twitter_update_list"></ul>
          </div>
        </div>
      </div>
    </div>
    <div id="ft">
      <!-- Footer -->
    </div>
    
    <script type="text/javascript" src="http://twitter.com/javascripts/blogger.js"></script>
    <script type="text/javascript" src="http://twitter.com/statuses/user_timeline/chrisroos.json?callback=twitterCallback2&amp;count=5"></script>
  
    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-160238-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>
  </body>

</html>