<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>

  <head>
    <meta name="microid" content="ff511e16d7108be450fccd6f4611cf8d1d5416d1" >
    <meta http-equiv="content-type" content="text/html; charset=utf-8" >
    <link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/DeferredUntilInspirationHits" >
    <link rel="stylesheet" href="/stylesheets/yui-reset-fonts-grids.css" type="text/css" media="all">
    <link rel="stylesheet" href="/stylesheets/blog.css" type="text/css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="/stylesheets/syntax.css" type="text/css" media="screen" charset="utf-8">
    <link rel="openid.server" href="http://www.myopenid.com/server">
    <link rel="openid.delegate" href="http://chrisroos.myopenid.com/">
    <title>Posts published on Tue, 22 August 2006 - deferred until inspiration hits</title>
  </head>
  
  <body>
    
    <div id="doc3" class="yui-t4">
      <div id="hd">
        <h1><a class="blogTitle" href="/">deferred until inspiration hits</a></h1>
      </div>
      <div id="bd">
        <div id="yui-main">
          <div class="yui-b">
            <div class="yui-g">

              
                <h2>
                  <a href="/articles/2006/08/22/textmate-environment-and-ruby-again">Textmate environment and ruby (again)</a>
                </h2>
                <p class="postedOn">
                  Posted by Chris Roos
                  <span class="typo_date" title="Tue, 22 Aug 2006 23:53:00">
                    Tue, 22 Aug 2006 23:53:00
                  </span>
                </p>

                <p>I&#8217;ve recently upgraded the version of ruby on my machine and came up against problems similar to <a href="http://blog.seagul.co.uk/articles/2006/07/28/textmate-and-env-ruby-no-such-file-or-directory">this</a>.  The problem previously was that <a href="http://www.macromates.com">textmate</a> wasn&#8217;t finding <a href="http://www.ruby-lang.org">ruby</a> at all.  This time, textmate was finding the wrong version of ruby.</p>


	<p>I found the following script useful in determining exactly which ruby binary textmate was using.</p>


<div class="typocode"><pre><code class="typocode_ruby"><span class="comment">#!/usr/bin/env ruby</span>

<span class="ident">require</span> <span class="punct">'</span><span class="string">rbconfig</span><span class="punct">'</span>
<span class="ident">puts</span> <span class="constant">Config</span><span class="punct">::</span><span class="constant">CONFIG</span><span class="punct">['</span><span class="string">bindir</span><span class="punct">']</span></code></pre></div>

	<p>Simply paste that into a textmate document, select it and hit Ctrl-r.  The path of the ruby binary should print right there in the window.</p>


	<p>To see far more info than you&#8217;ll ever likely need, replace the line starting <code>puts</code> above, with the following..</p>


<div class="typocode"><pre><code class="typocode_ruby"><span class="constant">Config</span><span class="punct">::</span><span class="constant">CONFIG</span><span class="punct">.</span><span class="ident">sort</span><span class="punct">.</span><span class="ident">each</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">key</span><span class="punct">,</span> <span class="ident">value</span><span class="punct">|</span>
    <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string"><span class="expr">#{key}</span> = <span class="expr">#{value}</span></span><span class="punct">&quot;</span>
<span class="keyword">end</span></code></pre></div>

                
                  <p>
                    Tags 
                    
                      <a href="/articles/tag/environment" rel="tag">environment</a>, 
                    
                      <a href="/articles/tag/ruby" rel="tag">ruby</a>, 
                    
                      <a href="/articles/tag/textmate" rel="tag">textmate</a>, 
                    
                  </p>
                
              
                <h2>
                  <a href="/articles/2006/08/22/rails-leaking-some-strings-in-development">Rails leaking some strings in development</a>
                </h2>
                <p class="postedOn">
                  Posted by Chris Roos
                  <span class="typo_date" title="Tue, 22 Aug 2006 10:47:00">
                    Tue, 22 Aug 2006 10:47:00
                  </span>
                </p>

                <p>I spent some time this morning checking out <a href="http://scottstuff.net/blog/">Scott Laird&#8217;s</a> <a href="http://scottstuff.net/blog/articles/2006/08/17/memory-leak-profiling-with-rails">memory profiler</a> against a fresh rails app.</p>


	<p>I was suprised to see that around 110 strings were being leaked on each request.  I was incredibly surprised when I used the string_debug option (to the memory profiler) to generate logs of strings living in ObjectSpace.  There were strings appearing that I <em>knew</em> were not in my new rails app anywhere.</p>


	<p>After grepping my working directory for some of these strings (and not coming up with anything), <a href="http://blog.floehopper.org">James</a> suggested that the strings could be in my irb history.  Although it wasn&#8217;t immediately obvious how they were appearing, the strings were indeed in my history (just over 100 lines worth.)</p>


	<p>A little inspection and the culprit was found.  The <a href="http://api.rubyonrails.com/classes/Breakpoint.html">rails breakpoint library</a> requires irb, which loads the irb_history.</p>


	<p>In summary: the contents of irb_history are loaded into object space on each request made to your rails app, while in development.  These strings do not appear to get garbage collected.  The problem does not affect apps running in production as the breakpoint library is not loaded in that environment.</p>

                
                  <p>
                    Tags 
                    
                      <a href="/articles/tag/memoryleak" rel="tag">memoryleak</a>, 
                    
                      <a href="/articles/tag/rails" rel="tag">rails</a>, 
                    
                      <a href="/articles/tag/ruby" rel="tag">ruby</a>, 
                    
                  </p>
                
              
                <h2>
                  <a href="/articles/2006/08/22/feed-reading-feature-requests">Feed reading feature requests</a>
                </h2>
                <p class="postedOn">
                  Posted by Chris Roos
                  <span class="typo_date" title="Tue, 22 Aug 2006 08:03:00">
                    Tue, 22 Aug 2006 08:03:00
                  </span>
                </p>

                <p>A bit of an unordered list of features I&#8217;d like to see in a feed reader.  It&#8217;s very possible these exist in some readers that I&#8217;m not aware of (I&#8217;ve moved from <a href="http://www.sharpreader.net/">desktop app on windows</a> through <a href="http://bloglines.com/">bloglines</a> and <a href="http://www.rojo.com">rojo</a> to <a href="http://www.feedshow.com">feedshow</a>).</p>


	<ul>
	<li>Comment from within the reader.  This would then automatically subscribe to a feed of the comments so that I could poll the updates.</li>
	</ul>


	<ul>
	<li>Notify me when feeds haven&#8217;t been accessible for a while.  Maybe the address has changed or the reader cannot interpret the feed correctly; either way, I&#8217;d like to know so that I can make an informed decision about what to do.</li>
	</ul>


	<ul>
	<li>When a page offers multiple feed formats, I don&#8217;t want to be asked what format to subscribe to.  The program should know the format it supports best and choose that.  As I type this, I&#8217;m thinking that this is more difficult if there is a choice between full and summary content.</li>
	</ul>


	<ul>
	<li>If an existing article is &#8216;refreshed&#8217; then diff it.  If it hasn&#8217;t changed then I don&#8217;t want to see it.  If it has changed, then highlight the changes for me.</li>
	</ul>


	<ul>
	<li>Show html in articles sensibly (rojo seemed to fail miserably on this front).</li>
	</ul>


	<ul>
	<li>Host a &#8216;live&#8217; (i.e. dynamically generated copy of my feeds in opml) &#8211; I can&#8217;t think of any reason to have to import/export these.</li>
	</ul>

                
                  <p>
                    Tags 
                    
                      <a href="/articles/tag/apps" rel="tag">apps</a>, 
                    
                      <a href="/articles/tag/feed" rel="tag">feed</a>, 
                    
                      <a href="/articles/tag/reading" rel="tag">reading</a>, 
                    
                  </p>
                
              

            </div>
          </div>
        </div>
        <div class="yui-b">
          <img src="/images/me.jpg" width="170px" height="111px" alt="Me">
          
          <ul class="navigation">
            <li>
              <a href="/contents">contents</a>
            </li>
            <li>
              <a href="http://flickr.com/photos/chrisjroos">flickr</a>
            </li>
          </ul>
          
          <div id="twitter_div">
            <h3><a href="http://twitter.com/chrisroos">twitter</a></h3>
            <ul id="twitter_update_list"></ul>
          </div>
          
          <div id="deliciousContainer">
            <h3><a href="http://del.icio.us/chrisjroos">del.icio.us</a></h3>
          </div>
        </div>
      </div>
    </div>
    <div id="ft">
      <!-- Footer -->
    </div>
    
    <script type="text/javascript" src="http://twitter.com/javascripts/blogger.js"></script>
    <script type="text/javascript" src="http://twitter.com/statuses/user_timeline/chrisroos.json?callback=twitterCallback2&amp;count=5"></script>
    
    <script type="text/javascript" src="http://del.icio.us/feeds/json/chrisjroos?count=5"></script>
    <script type="text/javascript" src="/javascripts/delicious.js"></script>
  
    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-160238-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>
  </body>

</html>