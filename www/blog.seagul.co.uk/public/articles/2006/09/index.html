<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>

  <head>
    <meta name="microid" content="ff511e16d7108be450fccd6f4611cf8d1d5416d1" >
    <meta http-equiv="content-type" content="text/html; charset=utf-8" >
    <link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/DeferredUntilInspirationHits" >
    <link rel="stylesheet" href="/stylesheets/yui-reset-fonts-grids.css" type="text/css" media="all">
    <link rel="stylesheet" href="/stylesheets/blog.css" type="text/css" media="all" charset="utf-8">
    <link rel="stylesheet" href="/stylesheets/syntax.css" type="text/css" media="all" charset="utf-8">
    <link rel="stylesheet" href="/stylesheets/print.css" type="text/css" media="print" charset="utf-8">
    <link rel="openid.server" href="http://www.myopenid.com/server">
    <link rel="openid.delegate" href="http://chrisroos.myopenid.com/">
    <title>Posts published in September 2006 - deferred until inspiration hits</title>
  </head>
  
  <body>
    
    <div id="doc3" class="yui-t4">
      <div id="hd">
        <h1><a class="blogTitle" href="/">deferred until inspiration hits</a></h1>
      </div>
      <div id="bd">
        <div id="yui-main">
          <div class="yui-b">
            <div class="yui-g">

              
                <h2>
                  <a href="/articles/2006/09/30/bye-bye-feedshow">Bye bye feedshow...</a>
                </h2>
                <p class="postedOn">
                  Posted by Chris Roos
                  <span class="typo_date" title="Sat, 30 Sep 2006 06:51:00">
                    Sat, 30 Sep 2006 06:51:00
                  </span>
                </p>

                <p>... hello <a href="http://www.techcrunch.com/2006/09/28/google-reader-steps-it-up-with-new-version/">revamped</a> <a href="http://reader.google.com">google reader</a></p>

                
              
                <h2>
                  <a href="/articles/2006/09/22/the-best-property-search-website">The best property search website</a>
                </h2>
                <p class="postedOn">
                  Posted by Chris Roos
                  <span class="typo_date" title="Fri, 22 Sep 2006 11:16:00">
                    Fri, 22 Sep 2006 11:16:00
                  </span>
                </p>

                <p>The majority of estate agent websites are crap.  Fact<sup><a href="#fn1">1</a></sup>.</p>


	<p><a href="http://www.nestoria.co.uk">Nestoria</a> is not crap.  Fact<sup><a href="#fn1">1</a></sup>.</p>


	<p id="fn1"><sup>1</sup>  <strong>fact</strong> <em>-noun</em> &#8211; the personal opinion of chris</p>

                
                  <p>
                    Tags 
                    
                      <a href="/articles/tag/fact" rel="tag">fact</a>, 
                    
                  </p>
                
              
                <h2>
                  <a href="/articles/2006/09/22/testing-against-the-garbage-collection-clock-or-dont-create-your-test-cases-as-anonymous-classes">Testing against the (Garbage Collection) Clock, or, Don't create your Test Cases as anonymous classes</a>
                </h2>
                <p class="postedOn">
                  Posted by Chris Roos
                  <span class="typo_date" title="Fri, 22 Sep 2006 10:43:00">
                    Fri, 22 Sep 2006 10:43:00
                  </span>
                </p>

                <p>I <a href="http://blog.seagul.co.uk/articles/2006/07/17/some-realisations-about-testing">wrote</a> a while ago about how I&#8217;d started creating my test cases as anonymous classes.</p>


	<p>I continued this practice until I was slapped in the face by my own stoopidity yesterday.  We were seeing a problem where tests were failing individually but appearing to run fine in rake.</p>


	<p><a href="http://blog.floehopper.org">James</a> was looking into it&#8230;</p>


<pre>
James: it seems like the ones defined by Class.new(Test::Unit::TestCase) aren't always being found in the ObjectSpace
James: but I can't quite work out why
James: i'm tempted to name them all as defined classes
Chris: oh ok
Chris: go for it
James: i'm pretty sure that works ok
Chris: interesting
James: only difference i can think of is that if the file is loaded twice you will create two instances of the anonymous class
James: whereas with the named class it will just reopen same class
Chris: why would that be a problem?
James: but it doens't look like its being loaded twice anyway
James: dunno
James: its the only difference i can think of, but it doesn't explain anything
James: can you think of any other differences
Chris: so if you create named classes for the testcases in p_l_i_test does it then fail in rake?
James: yup - and i've seen the problem in other tests where anonymous tests are defined
James: so there are quite a few tests that haven't been running in rake
Chris: bugger
Chris: i think ben just explained the problem
James: yeah?
Chris: as the classes aren't assigned to constants they can be garbage collected
Chris: oops
James: aha
Chris: no more anonymous test classes for christopher
James: that explains - why they were in the ObjectSpace one minute and not the next
</pre>

	<p>Note that p_l_i_test mentioned above is just a shorthand for one of our tests that was failing individually but &#8216;running&#8217; (or as we now know, not running) from rake.</p>


	<p>So, although you get a little added excitement to your testing (&#8220;Will this test class run before it gets garbage collected???&#8221;), it&#8217;s probably a lot safer to not use anonymous classes when testing.</p>


	<p>James has just informed me that we gained about 230 tests in rake by naming all of our test cases&#8230;</p>

                
                  <p>
                    Tags 
                    
                      <a href="/articles/tag/ruby" rel="tag">ruby</a>, 
                    
                      <a href="/articles/tag/testing" rel="tag">testing</a>, 
                    
                  </p>
                
              
                <h2>
                  <a href="/articles/2006/09/18/unified-method_exists-method-for-ruby">Unified method_exists method for ruby</a>
                </h2>
                <p class="postedOn">
                  Posted by Chris Roos
                  <span class="typo_date" title="Mon, 18 Sep 2006 22:59:00">
                    Mon, 18 Sep 2006 22:59:00
                  </span>
                </p>

                <p>There are loads of different ways to check whether an object (class or instance) contains a given method.</p>


	<p>In fact, there are so many different ways that I spent some time working out what was what.</p>


	<p>I started out testing each of the relevant Module methods on both a class and instance.  This was followed up by testing each of the relevant Object methods on both a class and instance.  The full test suite is <a href="http://blog.seagul.co.uk/pages/20060918_testing_method_responses_full">here</a>.</p>


	<p>I summarised the results into a more compact test suite <a href="http://blog.seagul.co.uk/pages/20060918_testing_method_responses_compact">here</a>.</p>


	<p>I think I&#8217;m correct in stating that there&#8217;s no one way to check for the existence of a method (be it public, protected or private) on a class.  However, the test results make it slightly easier to scan and create such a method &#8211; <a href="http://blog.seagul.co.uk/pages/20060918_testing_class_method_exists">three variants</a> none-the-less.</p>


	<p>The same statement goes for uniformly determining the existence of a method on an instance.  Once again the tests helped derive the three implementations <a href="http://blog.seagul.co.uk/pages/20060918_testing_instance_method_exists">here</a>.</p>


	<p>Combining these two imlpementations provides us with a uniform method to determine whether the receiver contains a method represented by <em>method_sym</em>.</p>


<div class="typocode"><pre><code class="typocode_ruby"><span class="keyword">class </span><span class="class">Object</span>
  <span class="keyword">def </span><span class="method">method_exists?</span><span class="punct">(</span><span class="ident">method_sym</span><span class="punct">)</span>
    <span class="ident">methods</span> <span class="punct">=</span> <span class="ident">public_methods</span> <span class="punct">+</span> <span class="ident">protected_methods</span> <span class="punct">+</span> <span class="ident">private_methods</span>
    <span class="ident">methods</span><span class="punct">.</span><span class="ident">include?</span><span class="punct">(</span><span class="ident">method_sym</span><span class="punct">.</span><span class="ident">to_s</span><span class="punct">)</span>
  <span class="keyword">end</span>
<span class="keyword">end</span>
<span class="keyword">class </span><span class="class">Class</span>
  <span class="keyword">def </span><span class="method">method_exists?</span><span class="punct">(</span><span class="ident">method_sym</span><span class="punct">)</span>
    <span class="ident">methods</span> <span class="punct">=</span> <span class="ident">public_instance_methods</span> <span class="punct">+</span> <span class="ident">protected_instance_methods</span> <span class="punct">+</span> <span class="ident">private_instance_methods</span>
    <span class="ident">methods</span><span class="punct">.</span><span class="ident">include?</span><span class="punct">(</span><span class="ident">method_sym</span><span class="punct">.</span><span class="ident">to_s</span><span class="punct">)</span>
  <span class="keyword">end</span>
<span class="keyword">end</span>

<span class="keyword">class </span><span class="class">Foo</span>
  <span class="keyword">def </span><span class="method">foo</span><span class="punct">;</span> <span class="keyword">end</span><span class="punct">;</span> <span class="ident">public</span> <span class="symbol">:foo</span>
  <span class="keyword">def </span><span class="method">bar</span><span class="punct">;</span> <span class="keyword">end</span><span class="punct">;</span> <span class="ident">protected</span> <span class="symbol">:bar</span>
  <span class="keyword">def </span><span class="method">baz</span><span class="punct">;</span> <span class="keyword">end</span><span class="punct">;</span> <span class="ident">private</span> <span class="symbol">:baz</span>
<span class="keyword">end</span>

<span class="ident">require</span> <span class="punct">'</span><span class="string">test/unit</span><span class="punct">'</span>

<span class="constant">Class</span><span class="punct">.</span><span class="ident">new</span><span class="punct">(</span><span class="constant">Test</span><span class="punct">::</span><span class="constant">Unit</span><span class="punct">::</span><span class="constant">TestCase</span><span class="punct">)</span> <span class="keyword">do</span>

  <span class="keyword">def </span><span class="method">assert_not</span><span class="punct">(</span><span class="ident">expr</span><span class="punct">)</span>
    <span class="ident">assert</span> <span class="punct">!</span> <span class="ident">expr</span>
  <span class="keyword">end</span>

  <span class="keyword">def </span><span class="method">assert_method_exists_is_working</span><span class="punct">(</span><span class="ident">receiver</span><span class="punct">)</span>
    <span class="punct">[</span><span class="symbol">:foo</span><span class="punct">,</span> <span class="symbol">:bar</span><span class="punct">,</span> <span class="symbol">:baz</span><span class="punct">].</span><span class="ident">each</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">sym</span><span class="punct">|</span>
      <span class="ident">assert</span> <span class="ident">receiver</span><span class="punct">.</span><span class="ident">method_exists?</span><span class="punct">(</span><span class="ident">sym</span><span class="punct">)</span>
      <span class="ident">assert</span> <span class="ident">receiver</span><span class="punct">.</span><span class="ident">method_exists?</span><span class="punct">(</span><span class="ident">sym</span><span class="punct">.</span><span class="ident">to_s</span><span class="punct">)</span>
    <span class="keyword">end</span>
    <span class="ident">assert_not</span> <span class="ident">receiver</span><span class="punct">.</span><span class="ident">method_exists?</span><span class="punct">(</span><span class="symbol">:made_up_method</span><span class="punct">)</span>
    <span class="ident">assert_not</span> <span class="ident">receiver</span><span class="punct">.</span><span class="ident">method_exists?</span><span class="punct">('</span><span class="string">made_up_method</span><span class="punct">')</span>
  <span class="keyword">end</span>

  <span class="keyword">def </span><span class="method">test_class</span>
    <span class="ident">assert_method_exists_is_working</span><span class="punct">(</span><span class="constant">Foo</span><span class="punct">)</span>
  <span class="keyword">end</span>

  <span class="keyword">def </span><span class="method">test_instance</span>
    <span class="ident">assert_method_exists_is_working</span><span class="punct">(</span><span class="constant">Foo</span><span class="punct">.</span><span class="ident">new</span><span class="punct">)</span>
  <span class="keyword">end</span>

<span class="keyword">end</span></code></pre></div>

	<p>What&#8217;s the point you ask?  I genuinely have no idea.  I&#8217;m sure there was one when I started but then my compulsiveness took over and I had to finish for no other reason than to finish.</p>

                
                  <p>
                    Tags 
                    
                      <a href="/articles/tag/ruby" rel="tag">ruby</a>, 
                    
                  </p>
                
              
                <h2>
                  <a href="/articles/2006/09/18/gdisk-very-cheap-free-online-storage">gDisk - very cheap (free) online storage</a>
                </h2>
                <p class="postedOn">
                  Posted by Chris Roos
                  <span class="typo_date" title="Mon, 18 Sep 2006 20:17:00">
                    Mon, 18 Sep 2006 20:17:00
                  </span>
                </p>

                <p>I&#8217;ve used <a href="http://gdisk.sourceforge.net/">this</a> for a while but haven&#8217;t got round to mentioning it.</p>


	<p>Basically, it uses a <a href="http://mail.google.com">gmail</a> account (curently offering around 2.7GB space) as online storage, accessed seamlessly from this app.  Mac Os X only I&#8217;m afraid although I&#8217;m sure I&#8217;ve heard of Windows alternatives.</p>


	<p>I&#8217;m not sure if gmail is still invite only, but if it is, and if someone reading doesn&#8217;t have a gmail account, let me know as I have plenty of invites.</p>

                
                  <p>
                    Tags 
                    
                      <a href="/articles/tag/software" rel="tag">software</a>, 
                    
                  </p>
                
              
                <h2>
                  <a href="/articles/2006/09/11/whats-the-time-google">What's the time google?</a>
                </h2>
                <p class="postedOn">
                  Posted by Chris Roos
                  <span class="typo_date" title="Mon, 11 Sep 2006 09:17:00">
                    Mon, 11 Sep 2006 09:17:00
                  </span>
                </p>

                <p>From this <a href="http://dmiessler.com/archives/910">article</a> (via <a href="http://www.lifehacker.com/software/google/google-school--get-the-local-time-for-a-location-199286.php">lifehacker</a>), we can ask google for the time.</p>


	<p>time london</p>


	<p>London, United Kingdom — Current local time: 9:18 AM on Monday, September 11<br/>
According to http://www.google.com</p>


	<p>That&#8217;s pretty cool.</p>

                
                  <p>
                    Tags 
                    
                      <a href="/articles/tag/google" rel="tag">google</a>, 
                    
                  </p>
                
              
                <h2>
                  <a href="/articles/2006/09/09/changing-irb-context">Changing Irb context</a>
                </h2>
                <p class="postedOn">
                  Posted by Chris Roos
                  <span class="typo_date" title="Sat, 09 Sep 2006 12:16:00">
                    Sat, 09 Sep 2006 12:16:00
                  </span>
                </p>

                <p>I picked up on this yesterday and now cannot find the article (it was something to do with manipulating a rails app from the console).  Sorry.</p>


<div class="typocode"><pre><code class="typocode_default">irb(main):001:0&gt; class Foo
irb(main):002:1&gt; private
irb(main):003:1&gt; def bar
irb(main):004:2&gt; 'bar'
irb(main):005:2&gt; end
irb(main):006:1&gt; end
=&gt; nil
irb(main):007:0&gt; Foo.new.bar
NoMethodError: private method `bar' called for #&lt;Foo:0x358304&gt;
        from (irb):7
        from :0
irb(main):009:0&gt; irb Foo.new # IMPORTANT BIT
irb#1(#&lt;Foo:0x31c5fc&gt;):001:0&gt; bar
=&gt; &quot;bar&quot;</code></pre></div>

	<p>Although cool, I can&#8217;t think of any situations where this would have been useful.  Ho hum.</p>

                
                  <p>
                    Tags 
                    
                      <a href="/articles/tag/irb" rel="tag">irb</a>, 
                    
                      <a href="/articles/tag/ruby" rel="tag">ruby</a>, 
                    
                  </p>
                
              
                <h2>
                  <a href="/articles/2006/09/09/in-memory-ar-object-for-testing">In memory AR object for testing</a>
                </h2>
                <p class="postedOn">
                  Posted by Chris Roos
                  <span class="typo_date" title="Sat, 09 Sep 2006 12:03:00">
                    Sat, 09 Sep 2006 12:03:00
                  </span>
                </p>

                <p>I&#8217;ve <a href="http://blog.seagul.co.uk/articles/2006/07/12/using-in-memory-active-record-objects-with-associations-for-testing">previously written</a> about using in memory active record objects for testing.</p>


	<p>In doing so recently, I&#8217;ve found it necessary to define the id of the in memory object.  By default this is obviously nil as it has not been persisted.  In addition, it is not possible to set it during normal object construction.</p>


<div class="typocode"><pre><code class="typocode_ruby"><span class="ident">person</span> <span class="punct">=</span> <span class="constant">Person</span><span class="punct">.</span><span class="ident">new</span><span class="punct">(</span><span class="symbol">:id</span> <span class="punct">=&gt;</span> <span class="number">1</span><span class="punct">)</span>
<span class="ident">p</span> <span class="ident">person</span><span class="punct">.</span><span class="ident">id</span>
<span class="comment">#=&gt; nil</span></code></pre></div>

	<p>However, we can give the person constructor a block, setting the id just after creation.</p>


<div class="typocode"><pre><code class="typocode_ruby"><span class="ident">person</span> <span class="punct">=</span> <span class="constant">Person</span><span class="punct">.</span><span class="ident">new</span> <span class="punct">{</span> <span class="punct">|</span><span class="ident">p</span><span class="punct">|</span> <span class="ident">p</span><span class="punct">.</span><span class="ident">id</span> <span class="punct">=</span> <span class="number">1</span> <span class="punct">}</span>
<span class="ident">p</span> <span class="ident">person</span><span class="punct">.</span><span class="ident">id</span>
<span class="comment">#=&gt; 1</span></code></pre></div>

	<p>Cool.</p>

                
                  <p>
                    Tags 
                    
                      <a href="/articles/tag/rails" rel="tag">rails</a>, 
                    
                      <a href="/articles/tag/testing" rel="tag">testing</a>, 
                    
                  </p>
                
              
                <h2>
                  <a href="/articles/2006/09/09/recommended-web-host">Recommended web host</a>
                </h2>
                <p class="postedOn">
                  Posted by Chris Roos
                  <span class="typo_date" title="Sat, 09 Sep 2006 11:32:00">
                    Sat, 09 Sep 2006 11:32:00
                  </span>
                </p>

                <p>I can&#8217;t recommend <a href="http://www.asmallorange.com">A Small Orange</a> enough.  They offer very competitive shared hosting and don&#8217;t charge for &#8220;upgrades&#8221; like the majority of hosts.  From their site..</p>


	<p>Many hosts put artificial limits on what you can do in order to force you to upgrade your account, just so you will buy that one extra MySQL database or extra email account you need. At A Small Orange, we don&#8217;t believe in artificial limitations so we offer the following unlimited features on all our hosting accounts:</p>


	<ul>
	<li>Unlimited <span class="caps">POP3</span>/IMAP Mail Accounts</li>
		<li>Unlimited MySQL Databases</li>
		<li>Unlimited Mailing Lists</li>
		<li>Unlimited Email Forwarders</li>
		<li>Unlimited Subdomains</li>
		<li>Unlimited Parked and Addon Domains</li>
		<li>Unlimited <span class="caps">FTP</span> Accounts</li>
	</ul>


	<p>I have been offering web and email hosting for a couple of local firms (harking back to me self-[un]employed days).  I wanted to get them moved to someone else (to relieve me of the burden) but felt responsible for getting them a good deal.  They only have small static sites so I was reluctant to pay for expensive hosting that offered unnecessary features.  I found <a href="http://www.dataflame.co.uk">dataflame</a> to be relatively cheap.  Unfortunately the &#8216;cheapness&#8217; soon disappears once we look at &#8216;upgrading&#8217; our account with such &#8216;features&#8217; as parked domains.  In fairness, most hosts seem to charge for these automated extras, making me very happy to discover <span class="caps">ASO</span>.</p>


	<p>I&#8217;ve moved the accounts over to <span class="caps">ASO</span> and have had no problems to date.</p>


	<p>I actually had reason to contact <span class="caps">ASO</span> yesterday (enable ssh access and one other matter).  Ssh access was configured within five minutes of my sending the email.  The other matter was resolved within one hour.  That&#8217;s some good supportin&#8217; they got goin&#8217; on.</p>


	<p>They also boast <a href="http://www.rubyonrails.com">rails</a> support but I haven&#8217;t got round to testing this yet.</p>


	<p>In fairness, I actually moved hosting for one of the firms to <a href="http://www.bluehost.com">bluehost</a> originally.  These guys also offer great rates and features (not quite as great as <span class="caps">ASO</span>).  We just had one problem &#8211; there are consistent network failures between us (at least parts of the UK) and them (somewhere in the States).  They can see the problem but as it lies with one of their upstream providers apparently there is not much they can do about it.  Hmmm.</p>


	<p>That&#8217;s enough praising for now.  Go <span class="caps">ASO</span>.</p>

                
                  <p>
                    Tags 
                    
                      <a href="/articles/tag/hosting" rel="tag">hosting</a>, 
                    
                      <a href="/articles/tag/praise" rel="tag">praise</a>, 
                    
                  </p>
                
              

            </div>
          </div>
        </div>
        <div class="yui-b">
          <img src="/images/me.jpg" width="170px" height="111px" alt="Me">
          
          <ul class="navigation">
            <li>
              <a href="/contents">contents</a>
            </li>
            <li>
              <a href="http://flickr.com/photos/chrisjroos">flickr</a>
            </li>
          </ul>
          
          <div id="twitter_div">
            <h3><a href="http://twitter.com/chrisroos">twitter</a></h3>
            <ul id="twitter_update_list"></ul>
          </div>
          
          <div id="deliciousContainer">
            <h3><a href="http://del.icio.us/chrisjroos">del.icio.us</a></h3>
          </div>
        </div>
      </div>
    </div>
    <div id="ft">
      <!-- Footer -->
    </div>
    
    <script type="text/javascript" src="http://twitter.com/javascripts/blogger.js"></script>
    <script type="text/javascript" src="http://twitter.com/statuses/user_timeline/chrisroos.json?callback=twitterCallback2&amp;count=5"></script>
    
    <script type="text/javascript" src="http://del.icio.us/feeds/json/chrisjroos?count=5"></script>
    <script type="text/javascript" src="/javascripts/delicious.js"></script>
  
    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      if (typeof(_gat) != 'undefined') {
        var pageTracker = _gat._getTracker("UA-160238-1");
        pageTracker._initData();
        pageTracker._trackPageview();
      }
    </script>
  </body>

</html>
