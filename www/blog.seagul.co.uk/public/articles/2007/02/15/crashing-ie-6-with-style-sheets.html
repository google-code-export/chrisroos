<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>

  <head>
    <!--#include virtual="/includes/_head.html"-->
    <title>Crashing IE 6 with style(sheets) - deferred until inspiration hits</title>
  </head>

  <body>
    
    <div id="doc3" class="yui-t4">
      <div id="hd">
        <!--#include virtual="/includes/_header.html"-->
      </div>
      <div id="bd">
        <div id="yui-main">
          <div class="yui-b">
            <div class="yui-g">

              <h2>Crashing IE 6 with style(sheets)</h2>
            
              <p class="postedOn">
                Posted by Chris Roos
                <span title="Thu, 15 Feb 2007 22:49:00">
                  Thu, 15 Feb 2007 22:49:00
                </span>
              </p>
          
              <p>Over about the last day and a half, if you used <a href="http://en.wikipedia.org/wiki/Internet_Explorer_6">Internet Explorer 6</a> to browse any of the reviews on <a href="http://www.reevoo.com">reevoo.com</a>, then we should apologise.  It seems that, apart from breaking the layout somewhat, we&#8217;d actually managed to cause <span class="caps">IE 6</span> to crash.  Not cool.  A concerted effort this morning got the problem sorted, but it took longer than it should&#8217;ve done, especially when you consider that about 75% of our traffic is from users of <span class="caps">IE 6</span>&#8230;</p>


	<p>Anyway, with the embarrassment out of the way, I thought I&#8217;d share the remotely interesting<sup><a href="#fn1">1</a></sup> findings of the investigation into the browser crash.  It turns out that a combination of these three little lines of <a href="http://en.wikipedia.org/wiki/CSS">css</a>, and any <a href="http://en.wikipedia.org/wiki/Doctype">doctype</a> declaration<sup><a href="#fn2">2</a></sup>, will cause <span class="caps">IE 6</span> to hang while waiting for the magic <a href="http://en.wikipedia.org/wiki/Control-Alt-Delete#Windows_NT">Windows kiss of life</a>.</p>


<div class="typocode"><pre><code class="typocode_default">margin-left: 240px;
margin-right: 10%;
width: expression(document.body.offsetWidth - 256);</code></pre></div>

	<p>It is not the specific values (240px, 10% and 256) in the lines above that are of interest &#8211; I was able to express and suppress the problem by altering those.  Unfortunately, I didn&#8217;t spend any time trying to find the threshold of the problem, and am therefore unsure as to the reason for this behaviour.</p>


	<p>The offending, nasty, IE hack has now been removed.  In addition, the day has been spent working with the <a href="http://daftpixel.wordpress.com">designer monkey</a> (ahh, you can call him Adam if you like) to start tidying up the, still somewhat cumbersome, stylesheets.</p>


	<p>For the curious, the simplest html page I could come up with that exhibits the crash behaviour in <span class="caps">IE 6</span> is below.</p>


<div class="typocode"><pre><code class="typocode_default">&lt;!-- &lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot; &quot;http://www.w3.org/TR/html4/strict.dtd&quot;&gt; --&gt;
&lt;!-- &lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt; --&gt;
&lt;!-- &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt; --&gt;
&lt;!-- &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt; --&gt;
&lt;!-- ANY OF THE ABOVE DOCTYPES CAUSE THE PROBLEM.  NO DOCTYPE = NO PROBLEM --&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;style type=&quot;text/css&quot;&gt;
      #content {
        margin-left: 240px;
        margin-right: 10%;
        width: expression(document.body.offsetWidth - 256);
      }
    &lt;/style&gt;
    &lt;title&gt;testing ie6&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id=&quot;content&quot;&gt;blurgh&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre></div>

	<p>[1] They&#8217;re really not interesting.</p>


	<p>[2] If there is no doctype declaration, the browser doesn&#8217;t crash (something to do with standards mode I believe).</p>
        
              <div id="disqus_thread"></div>
              <script type="text/javascript" src="http://disqus.com/forums/deferred-until-inspiration-hits/embed.js"></script>
              <noscript>
                <p><a href="http://deferred-until-inspiration-hits.disqus.com/?url=ref">View the forum thread.</a></p>
              </noscript>

              
              
              
                <h2>Trackbacks</h2>
                <ol class="trackbacks">
                  
                    <li>
                      <p class="postedOn">
                        From <strong>This site works best in a real browser</strong> on Thu, 03 Jan 2008 16:18:45
                      </p>
                      <a href="http://grahamcox.co.uk/serendipity/index.php?/archives/34-Yet-another-IE6-Hang-bug.html" rel="nofollow">Yet another IE6 Hang bug</a><br/>
                      It appears that I have just discovered yet another IE6 hang bug- though I'm probably not the first person to discover it... I'm not sure of the exact set of circumstances that cause it to happen yet, as I've not been able to reproduce it in a simp...
                    </li>
                  
                </ol>
              

            </div>
          </div>
        </div>
        <div class="yui-b">
          <!--#include virtual="/includes/_navigation.html"-->
        </div>
      </div>
    </div>
    <div id="ft">
      <!-- Footer -->
    </div>
    
    <!--#include virtual="/includes/_twitter.html" -->
    <!--#include virtual="/includes/_delicious.html" -->
    <!--#include virtual="/includes/_google_analytics.html" -->
  </body>

</html>
