<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

  <head>
    <meta name="microid" content="ff511e16d7108be450fccd6f4611cf8d1d5416d1" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/DeferredUntilInspirationHits" />
    <link rel="stylesheet" href="/stylesheets/azure.css" media="all" type="text/css" />
    <link rel="stylesheet" href="/stylesheets/print.css" media="print" type="text/css" />
    <link rel="openid.server" href="http://www.myopenid.com/server"/>
    <link rel="openid.delegate" href="http://chrisroos.myopenid.com/"/>
    <title>Most recent posts - deferred until inspiration hits</title>
  </head>

  <body>
  
    <div id="container" class="clearfix">
    
      <div id="header">
        <div id="logo">
          <h1 id="sitename"><a href="/">deferred until inspiration hits</a></h1>
        </div>
      </div>

      <div id="search">
      </div>

      <div id="content" class="clearfix">

        <div id="main">

          
            <div class="post">
              <h2>
                <a href="/articles/2008/02/26/tagging-my-del-icio-us-bookmarks-with-the-domain-of-the-url-that-im-bookmarking">Tagging my del.icio.us bookmarks with the domain of the URL that I'm bookmarking</a>
              </h2>
              <p class="auth">
                Posted by Chris Roos
                <span class="typo_date" title="Tue, 26 Feb 2008 08:49:00">
                  Tue, 26 Feb 2008 08:49:00
                </span>
              </p>
          
              <p>I&#8217;ve created another <a href="http://www.mozilla.com/firefox">firefox</a> extension that builds on the <a href="http://del.icio.us">del.icio.us</a> <a href="https://addons.mozilla.org/en-US/firefox/addon/3615">extension</a>.  This one finds the domain of the <a href="http://en.wikipedia.org/wiki/Uniform_Resource_Locator"><span class="caps">URL</span></a> you&#8217;re bookmarking and adds it as a tag to your bookmark.  It&#8217;s basically just a copy of my <a href="http://blog.seagul.co.uk/articles/2007/12/18/extracting-my-del-icio-us-permalinks-functionality-into-its-own-firefox-extension">del.icio.us permalinks extension</a></p>


	<p>To install this extension head over to the <a href="http://groups.google.com/group/delicious-domain-tags">delicious domain tags google group</a> and visit the installation page (I don&#8217;t seem to be able to link directly to it for some reason).</p>


	<p>I came across an interesting problem when trying to get both this and the del.icio.us permalinks extension working together.  Both of the extensions modify the onload attribute of the add bookmark dialog.  When I only had the del.icio.us permalinks extension I was hardcoding the onload attribute to call my function (deliciousPermalinks.addPermalinkTag()) and the original function (yAddBookMark.init()).  This approach fell down as soon as I had two extensions trying to modify the onload attribute: I didn&#8217;t know which extension would be loaded first and therefore one was always overwriting the other.  I&#8217;m sure there&#8217;s a nice way to do this but I hacked together a noddy initialisation script that finds the existing value of the onload attribute and adds to it with the relevant function.</p>


<div class="typocode"><pre><code class="typocode_default">var yAddBookmarkDialog = document.getElementById('dlg_AddYBookMark');
var yAddBookmarkOnload = yAddBookmarkDialog.getAttribute('onload');
var onload = 'deliciousPermalinks.addPermalinkTag()';
yAddBookmarkDialog.setAttribute('onload', [yAddBookmarkOnload, onload].join(';'))</code></pre></div>

	<p>I reference this script in my <a href="http://en.wikipedia.org/wiki/XUL">xul</a> file which causes it to be evaluated at (I guess) browser start time and the onload event to be modified correctly.</p>


	<p>I&#8217;ve updated the del.icio.us permalinks extension too but I think you&#8217;ll need to remove and re-add it again from the <a href="http://groups.google.com/group/delicious-permalinks/files">installation page</a>.</p>
            </div>
        
            <p class="meta">
              
            </p>
          
            <div class="post">
              <h2>
                <a href="/articles/2008/02/18/what-ive-been-up-to-projects-and-ideas">What I've been up to - Projects and Ideas</a>
              </h2>
              <p class="auth">
                Posted by Chris Roos
                <span class="typo_date" title="Mon, 18 Feb 2008 10:12:00">
                  Mon, 18 Feb 2008 10:12:00
                </span>
              </p>
          
              <p>I&#8217;ve been a bit quiet on the blogging front (to be fair, I&#8217;ve always been a bit slack) but I think it&#8217;s for good reason: I&#8217;ve re-discovered a love for programming, and in particular, creating things that I (and hopefully others) find useful.</p>


	<p>So, as a bit of an update, and a bit of a reminder for me, I thought I&#8217;d list all the things I&#8217;m either working on or thinking about.  Feel free to ask questions in the comments or by emailing me (chris at this domain).</p>


	<h2>Projects</h2>


	<h3>Atom (like <span class="caps">RSS</span>) feed for thisiskent news content</h3>


	<p>I&#8217;m interested in reading news articles from the local area but the <a href="http://www.thisiskent.co.uk">thisiskent website</a> doesn&#8217;t provide a feed for me to subscribe to.  I&#8217;ve created a little project that scrapes the news content from that site and produces a feed.  The feed is currently at <a href="http://seagul.co.uk/thisiskent-thanet.atom">http://seagul.co.uk/thisiskent-thanet.atom</a> but will possibly move in the future.</p>


	<h3>The Local Paper</h3>


	<p>I wanted to give each article, in our local papers, a permalink so that people had a way to reference an article they were talking about.  I&#8217;ve started building the site over at <a href="http://the-local-paper.co.uk">http://the-local-paper.co.uk</a>.  There&#8217;s a long way to go but I really wanted to start getting some content up so that I had more incentive to continue.</p>


	<p>Related posts: <a href="/articles/2007/06/01/an-open-letter-to-my-local-newspapers">An open letter to my local newspapers</a></p>


	<h3>Sending trackbacks to pages that I bookmark in <a href="http://del.icio.us">del.icio.us</a></h3>


	<p>I asked for this a while back in the <a href="http://tech.groups.yahoo.com/group/ydn-delicious/message/1447">del.icio.us group</a>.  It occurred to me that I could add the functionality myself to the <a href="https://addons.mozilla.org/en-US/firefox/addon/3615">del.icio.us firefox extension</a>, so I did.  It&#8217;s more of a proof of concept at the moment but you can follow <a href="/articles/2008/02/04/sending-trackbacks-to-the-sites-that-you-bookmark-in-del-icio-us">these instructions</a> if you wish to try it out.</p>


	<p>Related posts: <a href="/articles/2008/02/04/sending-trackbacks-to-the-sites-that-you-bookmark-in-del-icio-us">Sending trackbacks to the sites that you bookmark in del.icio.us</a></p>


	<h3>Adding <a href="http://en.wikipedia.org/wiki/Permalink">permalinks</a> to del.icio.us bookmarks</h3>


	<p>This was the precursor to the trackbacks project above.  I&#8217;ve created a firefox extension that, building on the del.icio.us extension, adds a &#8216;permalink tag&#8217; to each bookmark you create.  You can read more <a href="/articles/2007/12/18/extracting-my-del-icio-us-permalinks-functionality-into-its-own-firefox-extension">here</a> or visit the <a href="http://delicious-permalinks.googlegroups.com/web/installation.html">installation page</a> to install the extension.</p>


	<p>Related posts: <a href="/articles/2007/12/18/extracting-my-del-icio-us-permalinks-functionality-into-its-own-firefox-extension">Extracting my del.icio.us permalinks functionality into its own firefox extension</a>, <a href="/articles/2007/09/29/commenting-on-my-del-icio-us-bookmarks">Commenting on my del.icio.us bookmarks</a>, <a href="/articles/2007/09/05/patching-the-del-icio-us-firefox-extension-to-add-permalinks">Patching the del.icio.us firefox extension to add permalinks</a>, <a href="/articles/2007/09/04/permalinks-for-del-icio-us-bookmarks-posts" title="posts">Permalinks for del.icio.us bookmarks</a></p>


	<h3>Some blogging software</h3>


	<p>I decided that I really didn&#8217;t need the overhead of <a href="http://www.typosphere.org/">typo</a> to produce what is essentially a static site.  The result is some software that produces the website that you&#8217;re reading now.  I actually need to get some work done on this because I&#8217;m currently in a position where it&#8217;s harder for me to add content now than it used to be with typo.  D&#8217;oh.</p>


	<p>Related posts: <a href="/articles/2008/01/23/migration-from-typo-to-a-static-site-is-complete">Migration from typo to a static site is complete</a>, <a href="/articles/2008/01/23/migrating-this-blog-from-typo-to-a-static-site">Migrating this blog from Typo to a static site</a></p>


	<h3>An <span class="caps">SMS</span> service to lookup train information</h3>


	<p>I&#8217;ve built a service on top of <a href="http://www.twitter.com">twitter</a> that allows you to request departure information.  This is actually live now (read the <a href="/articles/2007/07/24/train-times-by-sms-or-improving-national-rail-enquiries">instructions</a>) but could be a lot more useful.  I&#8217;ve found that my main use case is to find the next few trains from a specific station within the next half hour or so &#8211; I&#8217;m hoping to make the interface better suit this need.</p>


	<p>Related posts: <a href="/articles/2007/07/24/train-times-by-sms-or-improving-national-rail-enquiries" title="or, improving National Rail Enquiries">Train times by <span class="caps">SMS</span></a></p>


	<h3>Software to interface with banking websites and download/convert the data to <a href="http://www.ofx.net/"><span class="caps">OFX</span></a> (for upload to <a href="http://www.wesabe.com">wesabe</a>)</h3>


	<p>A while back, I got quite addicted to using wesabe in an attempt to manage my finances (as it happens I&#8217;ve been very slack on this front too &#8211; managing money is just boring).  I wrote some scripts to download data from my banks&#8217; websites and additionally to convert that data to <span class="caps">OFX</span>.</p>


	<p>Related posts: <a href="/articles/2007/06/23/automatically-downloading-my-ing-direct-transactions">Automatically downloading my Ing Direct transactions</a>, <a href="/articles/2007/06/23/automatically-download-egg-credit-card-transactions">Automatically download egg credit card transactions</a>, <a href="/articles/2007/05/14/automatically-downloading-my-recent-transactions-from-lloyds-tsb">Automatically downloading my recent transactions from Lloyds <span class="caps">TSB</span></a>, <a href="/articles/2007/05/04/automatically-downloading-my-most-recent-hsbc-transactions">Automatically downloading my most recent Hsbc transactions</a>, <a href="/articles/2007/04/01/converting-egg-credit-card-statements-to-ofx-for-upload-to-wesabe" title="for upload to wesabe">Converting Egg Credit Card Statements to Ofx</a></p>


	<h3>A ruby implementation of <a href="http://www.pwdhash.com">pwdhash</a></h3>


	<p>I wanted a command line version of the pwdhash tool.  I knocked up a ruby implementation but haven&#8217;t really got round to making it command line friendly.</p>


	<p>Related posts: <a href="/articles/2007/04/11/getting-to-grips-with-pwdhash">Getting to grips with pwdhash</a></p>


	<h3>A web service that converts a UK postcode to Latitude/Longitude</h3>


	<p>It currently lives at <a href="http://seagul.co.uk/postcodes">http://seagul.co.uk/postcodes</a>.</p>


	<p>Related posts: <a href="/articles/2007/07/13/web-service-to-convert-uk-postcodes-outcode-to-latitude-and-longitude">Web service to convert UK Postcodes (outcode) to Latitude and Longitude</a>, <a href="/articles/2007/04/03/obtaining-latitude-longitude-for-uk-postcodes">Obtaining latitude/longitude for UK postcodes</a></p>


	<h2>Ideas</h2>


	<h3>A del.icio.us extension that mines del.icio.us (and magnolia etc) to find similar sites to those that I&#8217;m looking at</h3>


	<p>I did a fair bit of investigation into this, although I&#8217;m not sure any of it is of any real use.  I was working on the theory that if the page I&#8217;m looking at is tagged with, for example, &#8216;train&#8217;, &#8216;uk&#8217; and &#8216;travel&#8217; then other pages tagged in the same way would probably also be of interest.  Check the <a href="http://chrisroos.googlecode.com/svn/trunk/delicious_similar_sites">delicious_similar_sites</a> and <a href="http://chrisroos.googlecode.com/svn/trunk/delicious-sidebar">delicious-sidebar</a> projects to check my progress.</p>


	<p>Related posts: <a href="/articles/2007/10/03/finding-similar-sites-by-mining-the-del-icio-us-data">Finding similar sites by mining the del.icio.us data</a></p>


	<h3>A hosted <a href="http://en.wikipedia.org/wiki/Trackback">trackback</a> / <a href="http://en.wikipedia.org/wiki/Pingback">pingback</a> service</h3>


	<p>I&#8217;m thinking of something like <a href="http://www.disqus.com">disqus</a> (hosted comments service) but for trackbacks/pingbacks.  I did find a site called <a href="http://www.trackbackr.com">trackbackr</a> that would appear to offer something similar but I haven&#8217;t looked into it in any detail.</p>


	<h3>A hosted redirection service</h3>


	<p>I want an easy way to create short/friendly URLs for a domain that I own.  I&#8217;ve started exploring the possibility of a RESTful service to do just this.  There&#8217;s some initial code over on <a href="http://chrisroos.co.uk/code/mongrel-redirection">google code</a></p>


	<p>Related posts: <a href="/articles/2007/12/07/more-on-those-friendly-urls">More on those friendly URLs</a>, <a href="/articles/2007/11/27/short-human-friendly-permalinks">Short, Human friendly, Permalinks</a></p>


	<h3>A mobile friendly version of the <a href="http://www.nationalrail.co.uk">National Rail Enquiries</a> website</h3>


	<p>I need to check whether this is already covered by the <a href="http://www.traintimes.org.uk">accessible national rails</a> website.</p>


	<h3>An <span class="caps">SMS</span> alert with train information</h3>


	<p>For three mornings a week, I get a regular train.  I&#8217;d like to receive a text message, half an hour (or so) before I leave house, that tells me whether the train is running on time.</p>


	<h3>A receipt tagging application (del.icio.us for receipts)</h3>


	<p>Until recently I had a lot of receipts stored on my email server.  This didn&#8217;t feel like the right place for them so I&#8217;ve placed them all on my laptop, in a folder that gets backed up to <a href="http://aws.amazon.com/s3">Amazon S3</a> with the help of <a href="http://jungledisk.com">jungledisk</a>.  I&#8217;d like to be able to tag these receipts to make retrieval easier.  Ooh, I just had a thought &#8211; I wonder if I could just bookmark their <span class="caps">S3 URL</span> in del.icio.us&#8230;</p>


	<h3>Some software to track my unsubscriptions</h3>


	<p>Marketing emails annoy me.  I almost certainly don&#8217;t want them.  More importantly, when I state that I don&#8217;t want them, I want to have my wishes respected.  I knew that I was getting emails from companies that I&#8217;d unsubscribed from and wanted to track the offenders.  I&#8217;ve been using the <a href="http://www.stikipad.com">stikipad</a> wiki to do this but it&#8217;s not exactly ideal.  I&#8217;d like a service that will collect these emails (I&#8217;m thinking that I&#8217;ll forward them straight there) and report on those naughty companies that keep spamming me.</p>


	<p>Related posts: <a href="/articles/2007/10/31/naughty-spammy-tesco-entertainment">Naughty spammy Tesco Entertainment</a>, <a href="/articles/2007/09/21/companies-you-must-make-it-simple-for-me-to-unsubscribe-from-your-marketing-shite">Companies. You must make it simple for me to unsubscribe from your marketing shite</a>, <a href="/articles/2007/03/16/orange-orange-orange">Orange, orange, orange</a></p>


	<h3>A firefox extension/<a href="https://addons.mozilla.org/en-US/firefox/addon/748">greasemonkey</a> script to determine the canonical <span class="caps">URL</span> of a resource</h3>


	<p>At one stage I was trying to use del.icio.us to manage the stuff I had for sale on <a href="http://www.ebay.co.uk">ebay</a>.  Unfortunately, ebay is a bit naughty with their URLs (the same item for sale is available at different URLs) which meant I could end up bookmarking one <span class="caps">URL</span> and then not find my bookmark notes again &#8211; even though I knew I was looking at the same item.  I figure that we could maintain a list of rules that allow you to turn any <span class="caps">URL</span> into its canonical version.  This wouldn&#8217;t be ebay specific.</p>


	<p>Related posts: <a href="/articles/2007/12/14/web-pages-should-specify-their-canonical-url-permalink" title="permalink">Web pages should specify their canonical <span class="caps">URL</span></a></p>


	<h3>A website with lots of info about swimming pools</h3>


	<p>I&#8217;ve found it quite hard to find swimming pools close to work in the past.  I&#8217;d like a site that has a map of all swimming pools in the local area along with info (opening times, costs) and reviews of those pools (when&#8217;s a good time to go).</p>
            </div>
        
            <p class="meta">
              
            </p>
          
            <div class="post">
              <h2>
                <a href="/articles/2008/02/18/atom-like-rss-feeds-for-thisiskent-co-uk-news-stories">Atom (like RSS) feeds for thisiskent.co.uk news stories</a>
              </h2>
              <p class="auth">
                Posted by Chris Roos
                <span class="typo_date" title="Mon, 18 Feb 2008 10:00:00">
                  Mon, 18 Feb 2008 10:00:00
                </span>
              </p>
          
              <p>I&#8217;ve only recently discovered that thisiskent.co.uk (the website of three of our local newspapers) place their <a href="http://www.thisiskent.co.uk/displayNode.jsp?nodeId=250478&#38;command=newPage">news content</a> online.  Unfortunately they&#8217;ve neglected to provide <a href="http://en.wikipedia.org/wiki/RSS"><span class="caps">RSS</span></a> or <a href="http://en.wikipedia.org/wiki/Atom_%28standard%29">Atom</a> feeds which means that I don&#8217;t get to see it (visiting websites is soooo old school).  As I&#8217;m kinda interested in reading this news, I&#8217;ve put something together that creates a feed from their news articles.  The feed currently lives at http://seagul.co.uk/thisiskent-thanet.atom although this will probably move in the future.  Feel free to subscribe to the feed and please leave comments if it&#8217;s not working for you.  I&#8217;m currently only interested in the Thanet news section but I&#8217;d be happy to produce a feed for other areas if people are interested.</p>


	<p>The code&#8217;s over on <a href="http://chrisroos.googlecode.com/svn/trunk/thisis-rss/">google code</a> if you want to see how it all works.</p>
            </div>
        
            <p class="meta">
              
            </p>
          
            <div class="post">
              <h2>
                <a href="/articles/2008/02/04/sending-trackbacks-to-the-sites-that-you-bookmark-in-del-icio-us">Sending trackbacks to the sites that you bookmark in del.icio.us</a>
              </h2>
              <p class="auth">
                Posted by Chris Roos
                <span class="typo_date" title="Mon, 04 Feb 2008 09:53:00">
                  Mon, 04 Feb 2008 09:53:00
                </span>
              </p>
          
              <p>I know they have their problems (I had 26 good and 38428 spam when they were enabled on my site) but I&#8217;ve always liked the idea of <a href="http://en.wikipedia.org/wiki/Trackback">trackbacks</a> (and the <a href="http://en.wikipedia.org/wiki/Pingback">pingback</a> alternative).</p>


	<p>A few months back I started thinking about <a href="http://tech.groups.yahoo.com/group/ydn-delicious/message/1447">sending trackbacks when bookmarking pages in del.icio.us</a>.  Having been told that, although it was something that had been considered, it wasn&#8217;t likely to be added anytime soon I decided to take a look at adding the functionality myself.</p>


	<p>The <a href="http://www.sixapart.com/pronet/docs/trackback_spec">trackback specification</a> states that I must send the <a href="http://en.wikipedia.org/wiki/Permalink">permalink</a> of my &#8216;post&#8217; to the resource that I&#8217;m tracking back to.  By design, individual posts (or bookmarks) in <a href="http://del.icio.us">del.icio.us</a> aren&#8217;t addressable by a <a href="http://en.wikipedia.org/wiki/Uniform_Resource_Identifier"><span class="caps">URI</span></a>.  So, the first step was to <a href="http://blog.seagul.co.uk/articles/2007/09/04/permalinks-for-del-icio-us-bookmarks-posts">add permalinks to my del.icio.us bookmarks</a>.  This was a kludgy, manual fix that added permalinks to all my old bookmarks: it didn&#8217;t work for any new bookmarks.</p>


	<p>From here, I spent some time <a href="http://blog.seagul.co.uk/articles/2007/09/05/patching-the-del-icio-us-firefox-extension-to-add-permalinks">hacking around with the del.icio.us firefox extension</a> to get it to automatically generate these permalink tags.</p>


	<p>The final stage was to <a href="http://blog.seagul.co.uk/articles/2007/12/18/extracting-my-del-icio-us-permalinks-functionality-into-its-own-firefox-extension">extract the hacked-in functionality into its own extension</a> (an extension of an extension &#8211; cool huh).</p>


	<p>Somehow, it took until about a month ago for me to realise that I now had everything in place to actually add trackback support to the <a href="https://addons.mozilla.org/en-US/firefox/addon/3615">del.icio.us firefox extension</a>.  I started looking at it last week and I&#8217;ve just finish up the proof of concept this morning.  At present, it scans the page you&#8217;re bookmarking looking for an anchor tag with rel=trackback (because this is easier than trying to parse the <span class="caps">RDF</span>).  If it finds one then it uses the url-tag from the <a href="http://groups.google.com/group/delicious-permalinks">del.icio.us permalinks</a> extension to construct the permalink for your (to-be-created) bookmark and promptly goes off to send a trackback.</p>


	<p>The code is over in my <a href="http://chrisroos.googlecode.com/svn/trunk/delicious-trackbacks/">google code repository</a>.  It&#8217;s very rough around the edges so I&#8217;m holding off providing a compiled version just yet.  If you really want to play along then you can follow these steps:</p>


	<ul>
	<li>Install the del.icio.us firefox extension (to be fair, I&#8217;m going to assume that you&#8217;re probably at this stage already)</li>
		<li>Install the del.icio.us permalinks extension</li>
		<li>Checkout out the del.icio.us trackbacks source</li>
		<li>Find your Firefox extensions directory</li>
		<li>Create a textfile called delicious-trackbacks@googlegroups.com</li>
		<li>Add the path to the checked out project del.icio.us trackbacks project to this textfile</li>
		<li>Restart firefox</li>
		<li>Hope it all works and doesn&#8217;t destroy your computer :-)</li>
	</ul>


	<p>Oh, and I&#8217;ve created a real simple <a href="http://chrisroos.googlecode.com/svn/trunk/scratch/trackback-server/">trackback server</a> (well, a <a href="http://mongrel.rubyforge.org/">mongrel</a> handler) and a dummy page that includes a link to this server so that you can see the trackbacks being sent.</p>
            </div>
        
            <p class="meta">
              
            </p>
          
            <div class="post">
              <h2>
                <a href="/articles/2008/01/23/migration-from-typo-to-a-static-site-is-complete">Migration from Typo to a static site is complete</a>
              </h2>
              <p class="auth">
                Posted by Chris Roos
                <span class="typo_date" title="Wed, 23 Jan 2008 23:15:34">
                  Wed, 23 Jan 2008 23:15:34
                </span>
              </p>
          
              <p>I&#8217;m tired so I&#8217;ll keep this short&#8230;  If you can see this post then it means that I haven&#8217;t broken anything (well, it means I haven&#8217;t broken the rss feed anyway).  I still have lots to do but <a href="http://en.wikipedia.org/wiki/Eat_one's_own_dog_food">eating my own dogfood</a> should give me a reason to keep improving.</p>
            </div>
        
            <p class="meta">
              
            </p>
          
            <div class="post">
              <h2>
                <a href="/articles/2008/01/23/migrating-this-blog-from-typo-to-a-static-site">Migrating this blog from Typo to a static site</a>
              </h2>
              <p class="auth">
                Posted by Chris Roos
                <span class="typo_date" title="Wed, 23 Jan 2008 08:48:00">
                  Wed, 23 Jan 2008 08:48:00
                </span>
              </p>
          
              <p>I&#8217;m in the process of migrating this site from <a href="http://www.typosphere.org/">typo</a> to a bunch of static pages.  I aim to get the static site deployed this evening.  I&#8217;ll post again when I&#8217;ve migrated.  If any <span class="caps">RSS</span> subscribers out there don&#8217;t see a new post this evening, or tomorrow morning, then it means that I&#8217;ve failed to get it deployed or that it&#8217;s deployed and I&#8217;ve screwed up&#8230;. That&#8217;s all for now.</p>


	<p>Oh and the code is in the <a href="http://chrisroos.googlecode.com/svn/trunk/migrate-typo-to-static-site/">usual place</a> if you fancy following along.</p>
            </div>
        
            <p class="meta">
              
                Tags 
                
                  <a href="/articles/tag/blog" rel="tag">blog</a>, 
                
                  <a href="/articles/tag/ruby" rel="tag">ruby</a>, 
                
                  <a href="/articles/tag/typo" rel="tag">typo</a>, 
                
              
            </p>
          
            <div class="post">
              <h2>
                <a href="/articles/2008/01/17/emailing-photos-to-flickr-from-my-skypephone">Emailing photos to flickr from my Skypephone</a>
              </h2>
              <p class="auth">
                Posted by Chris Roos
                <span class="typo_date" title="Thu, 17 Jan 2008 18:20:00">
                  Thu, 17 Jan 2008 18:20:00
                </span>
              </p>
          
              <p>I wanted to get my thoughts down more than trying to write something particularly coherent so I apologise for the unstructured post.</p>


	<p>I&#8217;ve been trying to get this working for the last week or so, without much success.</p>


	<p>The first problem I ran into was my general impatience and incompetence.  I was able to receive emails to my 3mail.com address but sending of emails was not working (attachment or not).  I struggled alone for a bit before heading for the instruction manual and realising that I hadn&#8217;t actually configured my email settings.</p>


	<p>I needed to change the username (from the default &#8216;3Mail&#8217; to my mobile number) and the password (to the four digit code set-up at some point during the enrollment process).  I also changed the Mail address to my 3mail.com address but I&#8217;m not sure whether this was necessary or not.  Changing these settings allowed me to send email (I started by emailing my personal account).  As I was successfully receiving emails before these changes I can only assume that the username and password are required for <span class="caps">SMTP</span> and that <span class="caps">IMAP</span> authentication happens in some other, magical, way.</p>


	<p>The 3mail service appears to use standard <a href="http://en.wikipedia.org/wiki/Internet_Message_Access_Protocol"><span class="caps">IMAP</span></a> (imap.three.co.uk) and <a href="http://en.wikipedia.org/wiki/SMTP"><span class="caps">SMTP</span></a> servers but I&#8217;m guessing that access is restricted by IP address.  I certainly couldn&#8217;t access them from my laptop on the end of an <span class="caps">ADSL</span> connection.</p>


	<p>I was monitoring the costs of the emails being sent and soon realised that every email that included a picture cost fifty pence.  I sent a simple text email with a tiny subject and body and it didn&#8217;t affect my credit at all so I&#8217;m not entirely sure of their charging model (it could be that I pay for attachments or just messages over a certain size).  I wondered whether the data used in sending the email would come out of an Internet bundles.  I purchased a fifty pence, one day, Internet bundle and sent another message: my credit decreased by fifty pence again.  D&#8217;oh.</p>


	<p>It might be useful to note that you can send one email to multiple recipients (I tried two) for the same price (fifty pence for the email with picture that I was sending).</p>


	<p>I emailed the same photo to <a href="http://flickr.com">flickr</a> twice, cc&#8217;ing my personal address one occasion.  Neither email made it to flickr (well, it&#8217;s difficult to know that for sure but it certainly didn&#8217;t show up) but the email cc&#8217;d to me came through fine.  To ensure that &#8216;email to flickr&#8217; was working correctly, I sent the picture I&#8217;d just received to my flickr email address (copied from the email) and it <a href="http://www.flickr.com/photos/chrisjroos/2199297357/">showed up</a> almost immediately.  Hmm, so I&#8217;ve now wasted a couple of quid and still can&#8217;t email my photos to flickr.</p>


	<p>I was able to send the message as a picture message to flickr (and my personal email) at a cost of twenty-five pence.  There are two (smallish) downsides to this approach: the pictures are resized to 640&#215;480 before sending and, as it goes through an <a href="http://en.wikipedia.org/wiki/Multimedia_Messaging_Service"><span class="caps">MMS</span></a> to email translation phase, the email you receive doesn&#8217;t have the subject and body set correctly (<a href="http://www.flickr.com/photos/chrisjroos/2199389895/">screenshot</a>).</p>
            </div>
        
            <p class="meta">
              
                Tags 
                
                  <a href="/articles/tag/email" rel="tag">email</a>, 
                
                  <a href="/articles/tag/flickr" rel="tag">flickr</a>, 
                
                  <a href="/articles/tag/mms" rel="tag">mms</a>, 
                
                  <a href="/articles/tag/pictures" rel="tag">pictures</a>, 
                
                  <a href="/articles/tag/skypephone" rel="tag">skypephone</a>, 
                
              
            </p>
          
            <div class="post">
              <h2>
                <a href="/articles/2008/01/16/testing-my-mod_rewrite-configuration-with-ruby">Testing my mod_rewrite configuration with ruby</a>
              </h2>
              <p class="auth">
                Posted by Chris Roos
                <span class="typo_date" title="Wed, 16 Jan 2008 09:31:00">
                  Wed, 16 Jan 2008 09:31:00
                </span>
              </p>
          
              <p>In order to ensure that I didn&#8217;t break anything while setting up my <a href="http://blog.seagul.co.uk/articles/2008/01/16/chris-1-mod_rewrite-0-muhahahaha">mod_rewrite rules</a> I created a little <a href="http://chrisroos.googlecode.com/svn/trunk/the-local-paper/apache_test.rb">ruby script</a> to test my expectations.  I&#8217;ve cut down the rules in the example below but you should get the idea.  It&#8217;d be quite cool to create a little dsl to better express the intentions of the code.</p>


<div class="typocode"><pre><code class="typocode_ruby"><span class="ident">require</span> <span class="punct">'</span><span class="string">net/http</span><span class="punct">'</span>

<span class="ident">expectations</span> <span class="punct">=</span> <span class="punct">{</span>
  <span class="comment"># Redirect www. to .</span>
  <span class="punct">'</span><span class="string">http://www.the-local-paper.co.uk/</span><span class="punct">'</span> <span class="punct">=&gt;</span> <span class="punct">{</span>
    <span class="symbol">:url</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">http://the-local-paper.co.uk/</span><span class="punct">',</span> <span class="symbol">:code</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">301</span><span class="punct">'</span>
  <span class="punct">},</span>
  <span class="comment"># Requests for the-local-paper.co.uk should return a 200 (OK) response</span>
  <span class="punct">'</span><span class="string">http://the-local-paper.co.uk/</span><span class="punct">'</span> <span class="punct">=&gt;</span> <span class="punct">{</span>
    <span class="symbol">:code</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">200</span><span class="punct">'</span>
  <span class="punct">}</span>
<span class="punct">}</span>

<span class="ident">expectations</span><span class="punct">.</span><span class="ident">each</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">request_url</span><span class="punct">,</span> <span class="ident">expected_attributes</span><span class="punct">|</span>
  <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">Requesting: <span class="expr">#{request_url}</span></span><span class="punct">&quot;</span>

  <span class="ident">url</span> <span class="punct">=</span> <span class="constant">URI</span><span class="punct">.</span><span class="ident">parse</span><span class="punct">(</span><span class="ident">request_url</span><span class="punct">)</span>
  <span class="ident">request</span> <span class="punct">=</span> <span class="constant">Net</span><span class="punct">::</span><span class="constant">HTTP</span><span class="punct">::</span><span class="constant">Get</span><span class="punct">.</span><span class="ident">new</span><span class="punct">(</span><span class="ident">url</span><span class="punct">.</span><span class="ident">path</span><span class="punct">)</span>
  <span class="ident">response</span> <span class="punct">=</span> <span class="constant">Net</span><span class="punct">::</span><span class="constant">HTTP</span><span class="punct">.</span><span class="ident">start</span><span class="punct">(</span><span class="ident">url</span><span class="punct">.</span><span class="ident">host</span><span class="punct">,</span> <span class="ident">url</span><span class="punct">.</span><span class="ident">port</span><span class="punct">)</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">http</span><span class="punct">|</span>
    <span class="ident">http</span><span class="punct">.</span><span class="ident">request</span><span class="punct">(</span><span class="ident">request</span><span class="punct">)</span>
  <span class="keyword">end</span>

  <span class="keyword">if</span> <span class="ident">redirection_url</span> <span class="punct">=</span> <span class="ident">expected_attributes</span><span class="punct">[</span><span class="symbol">:url</span><span class="punct">]</span>
    <span class="keyword">raise</span> <span class="punct">&quot;</span><span class="string">Expected '<span class="expr">#{redirection_url}</span>' in the Location header but got '<span class="expr">#{response['Location']}</span>'.</span><span class="punct">&quot;</span> <span class="keyword">unless</span> <span class="ident">redirection_url</span> <span class="punct">==</span> <span class="ident">response</span><span class="punct">['</span><span class="string">Location</span><span class="punct">']</span>
  <span class="keyword">end</span>
  <span class="keyword">if</span> <span class="ident">status_code</span> <span class="punct">=</span> <span class="ident">expected_attributes</span><span class="punct">[</span><span class="symbol">:code</span><span class="punct">]</span>
    <span class="keyword">raise</span> <span class="punct">&quot;</span><span class="string">Expected status code of (<span class="expr">#{status_code}</span>) but got (<span class="expr">#{response.code}</span>).</span><span class="punct">&quot;</span> <span class="keyword">unless</span> <span class="ident">status_code</span> <span class="punct">==</span> <span class="ident">response</span><span class="punct">.</span><span class="ident">code</span>
  <span class="keyword">end</span>
<span class="keyword">end</span></code></pre></div>
            </div>
        
            <p class="meta">
              
                Tags 
                
                  <a href="/articles/tag/apache" rel="tag">apache</a>, 
                
                  <a href="/articles/tag/mod_rewrite" rel="tag">mod_rewrite</a>, 
                
                  <a href="/articles/tag/ruby" rel="tag">ruby</a>, 
                
                  <a href="/articles/tag/test" rel="tag">test</a>, 
                
              
            </p>
          
            <div class="post">
              <h2>
                <a href="/articles/2008/01/16/chris-1-mod_rewrite-0-muhahahaha">Chris 1, mod_rewrite 0 (muhahahaha)</a>
              </h2>
              <p class="auth">
                Posted by Chris Roos
                <span class="typo_date" title="Wed, 16 Jan 2008 09:08:00">
                  Wed, 16 Jan 2008 09:08:00
                </span>
              </p>
          
              <p>I&#8217;ve now spent quite a considerable amount of time trying to get <a href="http://httpd.apache.org/docs/1.3/mod/mod_rewrite.html">mod_rewrite</a> to do my bidding and I think I might just have cracked it<sup><a href="#fn1">1</a></sup>.</p>


	<h3>The requirements</h3>


	<ul>
	<li>Permanently redirect (301) and requests for www.the-local-paper.co.uk to the-local-paper.co.uk</li>
		<li>Permanently redirect any requests for <code>/index.html</code> to <code>/</code></li>
		<li>Permanently redirect any requests for <code>/&lt;article&gt;.html</code> to <code>/&lt;article&gt;</code></li>
		<li>Render the corresponding <code>/&lt;article&gt;.html</code> for any requests for <code>/&lt;article&gt;</code></li>
		<li>Hide .svn directories as the entire site is checked out from <a href="http://subversion.tigris.org/">subversion</a></li>
	</ul>


	<h3>The mod_rewrite rules</h3>


<div class="typocode"><pre><code class="typocode_default"># Permanently (301) redirect /index.html to / (regex copied from http://www.webmasterworld.com/apache/3155094.htm)
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /.*index\.html\ HTTP/
RewriteRule ^(.*)index\.html$ $1 [R=301,L]

# Permanently (301) redirect /&lt;article&gt;.html to /&lt;article&gt;, ensuring that we don't try to redirect index.html to index
RewriteCond %{THE_REQUEST} .+/[0-9]{4}/[0-9]{2}/[0-9]{2}/.+\.html\ HTTP/
RewriteCond %{THE_REQUEST} !index\.html\ HTTP/
RewriteRule ^(.*)\.html$ $1 [R=301,L]

# If we receive a request for an article without a .html extension then let's rewrite internally to render the file with the .html extension
RewriteCond %{REQUEST_URI} .+/[0-9]{4}/[0-9]{2}/[0-9]{2}/.+$
RewriteCond %{REQUEST_URI} !\.html$
RewriteRule ^(.*)$ $1.html [L]

# Permanently (301) remove www.
RewriteCond %{HTTP_HOST} ^www.the-local-paper.co.uk$ [NC]
RewriteRule ^(.*)$ http://the-local-paper.co.uk/$1 [R=301,L]

# Block access to the .svn directories
&lt;DirectoryMatch &quot;^/.*/\.svn/&quot;&gt;
  ErrorDocument 403 /404.html
  Order allow,deny
  Deny from all
  Satisfy All
&lt;/DirectoryMatch&gt;</code></pre></div>

	<p>I figured that there&#8217;s a chance some of these rules might come in useful to someone else.</p>


	<p id="fn1"><sup>1</sup> This has all been for the <a href="http://blog.seagul.co.uk/articles/2007/06/01/an-open-letter-to-my-local-newspapers">local paper idea</a> I mentioned a while back.  I&#8217;ve actually <a href="http://twitter.com/chrisroos/statuses/570937102">started</a> to get some content up on <a href="http://the-local-paper.co.uk">the-local-paper.co.uk</a> if you want to play along and see how it&#8217;s shaping up..</p>
            </div>
        
            <p class="meta">
              
                Tags 
                
                  <a href="/articles/tag/apache" rel="tag">apache</a>, 
                
                  <a href="/articles/tag/local" rel="tag">local</a>, 
                
                  <a href="/articles/tag/mod_rewrite" rel="tag">mod_rewrite</a>, 
                
                  <a href="/articles/tag/paper.co.uk" rel="tag">paper.co.uk</a>, 
                
                  <a href="/articles/tag/the" rel="tag">the</a>, 
                
                  <a href="/articles/tag/the-local-paper.co.uk" rel="tag">the-local-paper.co.uk</a>, 
                
                  <a href="/articles/tag/tlpa" rel="tag">tlpa</a>, 
                
              
            </p>
          
            <div class="post">
              <h2>
                <a href="/articles/2008/01/14/fun-with-mod_rewrite-and-its-special-variables-request_uri-is_subreq-and-the_request">Fun with mod_rewrite (and its special variables REQUEST_URI, IS_SUBREQ and THE_REQUEST)</a>
              </h2>
              <p class="auth">
                Posted by Chris Roos
                <span class="typo_date" title="Mon, 14 Jan 2008 10:14:00">
                  Mon, 14 Jan 2008 10:14:00
                </span>
              </p>
          
              <p>I wasted a few hours of my life, over the weekend, playing with <a href="http://httpd.apache.org/docs/1.3/mod/mod_rewrite.html">mod_rewrite</a>.  I had, what I thought to be, a fairly simple problem to solve: I wanted requests for index.html within any subdirectory of my site to be <a href="http://en.wikipedia.org/wiki/URL_redirection">redirected</a> to the root of that subdirectory.  So, a request for example.com/subdir/index.html would be (301) redirected to example.com/subdir/.</p>


	<p>I thought I could do this without using <a href="http://httpd.apache.org/docs/1.3/mod/mod_rewrite.html#RewriteCond">RewriteCond</a>.  I tried something like this.</p>


<div class="typocode"><pre><code class="typocode_default">RewriteRule ^(.*)index\.html$ $1 [R=301]</code></pre></div>

	<p>I would expect this to match requests for URLs that end with index.html and redirect them to the <span class="caps">URL</span> minus index.html.  Although this correctly redirected /subdir/index.html to /subdir/ it would also attempt to redirect /subdir/ to /subdir/ resulting in an infinite loop.  It took me a very long time to work out, what I believe, is going on.  If I understand correctly, <a href="http://httpd.apache.org/">apache</a> will send every request (i.e. not just the request you issue from the browser) through mod_rewrite.  When we request /subdir/, apache will try, and fail, to match that <span class="caps">URL</span> with our regex (/subdir/ doesn&#8217;t end with index.html).  Internally, apache then &#8216;requests&#8217; index.html (since index.html is the <a href="http://httpd.apache.org/docs/1.3/mod/mod_dir.html#directoryindex">DirectoryIndex</a>).  This request matches our regex which results in apache sending the 301 redirect and us ending up with an infinite loop.  If I mis-understand what&#8217;s going on please feel free to correct me.</p>


	<p>Based on this assumption, I figured I&#8217;d need to use RewriteCond to somehow ignore the internal request for index.html.  I initially added a condition that checked for the <span class="caps">REQUEST</span>_URI ending in index.html (<code>RewriteCond %{REQUEST_URI} index\.html$</code>).  This suffered the same problem as my initial attempt.  A little more reading led me to the IS_SUBREQ special variable.  I thought this might allow me to ignore the &#8216;internal request&#8217; for index.html (<code>RewriteCond %{IS_SUBREQ} false</code>) but I couldn&#8217;t get it to have any effect.</p>


	<p>In searching for answers to this problem I kept seeing <span class="caps">THE</span>_REQUEST special variable used in the solution, although never an explanation as to why it&#8217;s used (specifically in preference to <span class="caps">REQUEST</span>_URI).  I ended up using <span class="caps">THE</span>_REQUEST in my solution (not technically my solution as I stole it from a site that I failed to bookmark) and it seems to work OK.</p>


<div class="typocode"><pre><code class="typocode_default">RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /.*index\.html\ HTTP/
RewriteRule ^(.*)index\.html$ $1 [R=301,L]</code></pre></div>

	<p>I&#8217;m guessing that this is because <span class="caps">THE</span>_REQUEST contains the full details (the stuff that appears in the log file) of the request from the client (browser) and will therefore be empty for any &#8216;internal requests&#8217;.  Anyone know if my assumptions are correct?</p>
            </div>
        
            <p class="meta">
              
                Tags 
                
                  <a href="/articles/tag/apache" rel="tag">apache</a>, 
                
                  <a href="/articles/tag/mod_rewrite" rel="tag">mod_rewrite</a>, 
                
                  <a href="/articles/tag/url" rel="tag">url</a>, 
                
              
            </p>
          

        </div>

        <div id="sidebar">

          <div class="sidebar-node">
            <h3>Syndicate</h3>
            <a href="http://feeds.feedburner.com/DeferredUntilInspirationHits" title="Subscribe to my feed, deferred until inspiration hits" rel="alternate" type="application/rss+xml">
              <img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="border:0"/> 
              Subscribe to the feed
            </a>
          </div>

        </div>

        <br clear="all" />

      </div>
    
      <div id="footer">
      </div>

    </div>
  
    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-160238-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>
  </body>

</html>